<!DOCTYPE html>
<html lang="zh-TW" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript èªæ³•å®Œæ•´æ•™å­¸</title>
    <link rel="icon" href="html_favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* æ·±è‰²æ¨¡å¼ä¸‹çš„é¡è‰²è¦†è“‹ */
        [data-theme="dark"] {
            --text-color: #e5e5e5;
            --background-color: #1a1a1a;
            --code-bg: #2d2d2d;
            --section-border: #333;
        }
        
        /* å…¨å±€æ–‡å­—è¨­å®š */
        body {
            color: var(--text-color, #333);
            background-color: var(--background-color, #fff);
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1, h2, h3 {
            color: var(--heading-color, #2c3e50);
        }
        
        pre, code {
            background-color: var(--code-bg, #f5f5f5);
        }
        
        .section {
            border-bottom: 1px solid var(--section-border, #eee);
            margin-bottom: 30px;
            padding-bottom: 20px;
        }
        
        [data-theme="dark"] p, 
        [data-theme="dark"] li, 
        [data-theme="dark"] td, 
        [data-theme="dark"] th, 
        [data-theme="dark"] h1, 
        [data-theme="dark"] h2, 
        [data-theme="dark"] h3 {
            color: var(--text-color);
        }
        
        [data-theme="dark"] a {
            color: #6ab0ff;
        }
        
        .runnable-code {
            position: relative;
            margin: 20px 0;
        }
        .code-editor {
            width: 100%;
            min-height: 100px;
            font-family: 'Consolas', 'Monaco', monospace;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f8f8f8;
            resize: vertical;
        }
        [data-theme="dark"] .code-editor {
            background-color: #2d2d2d;
            color: #f8f8f8;
            border-color: #444;
        }
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .copy-button:hover {
            background-color: #219652;
        }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        [data-theme="dark"] pre {
            background-color: #2d2d2d;
            color: #f8f8f8;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: Consolas, monospace;
        }
        [data-theme="dark"] code {
            background-color: #2d2d2d;
            color: #f8f8f8;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        [data-theme="dark"] table {
            color: var(--text-color);
        }
        [data-theme="dark"] th {
            background-color: #333;
        }
        [data-theme="dark"] td, [data-theme="dark"] th {
            border-color: #444;
        }
        
        .example {
            border-left: 3px solid #3498db;
            padding-left: 15px;
            margin: 20px 0;
        }
        
        .js-output {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
        }
        
        [data-theme="dark"] .js-output {
            background-color: #333;
            border-color: #444;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>JavaScript èªæ³•å®Œæ•´æ•™å­¸</h1>
            <button id="theme-toggle" aria-label="åˆ‡æ›æ·±è‰²/æ·ºè‰²æ¨¡å¼">
                <span class="theme-icon light-icon">ğŸŒ</span>
                <span class="theme-icon dark-icon">ğŸŒ™</span>
            </button>
        </div>
        <nav>
            <ul>
                <li><a href="home.html">é¦–é </a></li>
                <li><a href="#js-basics">JavaScriptåŸºç¤</a></li>
                <li><a href="#variables">è®Šæ•¸èˆ‡æ•¸æ“šé¡å‹</a></li>
                <li><a href="#operators">é‹ç®—ç¬¦</a></li>
                <li><a href="#control-flow">æ§åˆ¶æµç¨‹</a></li>
                <li><a href="#functions">å‡½æ•¸</a></li>
                <li><a href="#arrays">é™£åˆ—</a></li>
                <li><a href="#objects">ç‰©ä»¶</a></li>
                <li><a href="#dom">DOMæ“ä½œ</a></li>
                <li><a href="#events">äº‹ä»¶è™•ç†</a></li>
                <li><a href="#async">ç•°æ­¥ç·¨ç¨‹</a></li>
                <li><a href="#error-handling">éŒ¯èª¤è™•ç†</a></li>
                <li><a href="#es6plus">ES6+ç‰¹æ€§</a></li>
                <li><a href="#modules">æ¨¡çµ„ç³»çµ±</a></li>
                <li><a href="#storage">å­˜å„²</a></li>
                <li><a href="#json">JSONæ“ä½œ</a></li>
                <li><a href="#api">APIè«‹æ±‚</a></li>
                <li><a href="#debugging">èª¿è©¦æŠ€å·§</a></li>
                <li><a href="#best-practices">æœ€ä½³å¯¦è¸</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="introduction">
            <h2>JavaScript èªæ³•å®Œæ•´æ•™å­¸</h2>
            <p>JavaScriptæ˜¯ä¸€ç¨®é«˜ç´šçš„ã€è§£é‡‹å‹çš„ç¨‹å¼èªè¨€ï¼Œæ˜¯ç¶²é é–‹ç™¼ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚å®ƒä½¿ç¶²é å…·æœ‰äº’å‹•æ€§ï¼Œä¸¦ä½¿é–‹ç™¼è€…èƒ½å¤ å‰µå»ºå‹•æ…‹å…§å®¹å’ŒWebæ‡‰ç”¨ç¨‹åºã€‚</p>
            <p>æœ¬æ•™å­¸å°‡ç³»çµ±åœ°ä»‹ç´¹JavaScriptçš„å„ç¨®èªæ³•å’Œæ¦‚å¿µï¼Œå¾åŸºç¤åˆ°é€²éšï¼Œå¹«åŠ©æ‚¨æŒæ¡é€™é–€å¼·å¤§çš„ç¨‹å¼èªè¨€ã€‚</p>
        </section>

        <section id="js-basics" class="section">
            <h2>1. JavaScriptåŸºç¤</h2>
            <h3>1.1 ä»€éº¼æ˜¯JavaScriptï¼Ÿ</h3>
            <p>JavaScriptæ˜¯ä¸€ç¨®è¼•é‡ç´šã€è§£é‡‹å‹æˆ–å³æ™‚ç·¨è­¯å‹çš„ç¨‹å¼èªè¨€ï¼Œå»£æ³›ç”¨æ–¼Webé–‹ç™¼ã€‚å®ƒæ˜¯ç¶²é ä¸‰å¤§æ ¸å¿ƒæŠ€è¡“ä¹‹ä¸€ï¼ˆHTMLã€CSSã€JavaScriptï¼‰ã€‚</p>
            
            <h3>1.2 å¦‚ä½•åœ¨HTMLä¸­ä½¿ç”¨JavaScript</h3>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-include-js" readonly>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;JavaScriptç¤ºä¾‹&lt;/title&gt;
    &lt;!-- å…§éƒ¨JavaScript --&gt;
    &lt;script&gt;
        // JavaScriptä»£ç¢¼æ”¾åœ¨é€™è£¡
        console.log('é€™æ˜¯å…§éƒ¨JavaScript');
    &lt;/script&gt;
    
    &lt;!-- å¤–éƒ¨JavaScript --&gt;
    &lt;script src="script.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- å…§è¯JavaScript --&gt;
    &lt;button onclick="alert('æŒ‰éˆ•è¢«é»æ“Šäº†!')"&gt;é»æ“Šæˆ‘&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>
                <button class="copy-button" onclick="copyCode('code-include-js')">è¤‡è£½</button>
            </div>
            
            <h3>1.3 JavaScriptè¼¸å‡º</h3>
            <p>JavaScriptå¯ä»¥é€šéå¤šç¨®æ–¹å¼é¡¯ç¤ºæ•¸æ“šï¼š</p>
            <ul>
                <li>ä½¿ç”¨<code>console.log()</code>è¼¸å‡ºåˆ°æ§åˆ¶å°</li>
                <li>ä½¿ç”¨<code>alert()</code>é¡¯ç¤ºè­¦å‘Šæ¡†</li>
                <li>ä½¿ç”¨<code>document.write()</code>å¯«å…¥åˆ°HTMLæ–‡æª”</li>
                <li>ä½¿ç”¨<code>innerHTML</code>å¯«å…¥åˆ°HTMLå…ƒç´ </li>
            </ul>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-output" readonly>// æ§åˆ¶å°è¼¸å‡º
console.log('é€™æ˜¯æ§åˆ¶å°è¼¸å‡º');

// è­¦å‘Šæ¡†
alert('é€™æ˜¯ä¸€å€‹è­¦å‘Šæ¡†');

// å¯«å…¥HTMLæ–‡æª”
document.write('é€™å°‡é¡¯ç¤ºåœ¨é é¢ä¸Š');

// å¯«å…¥HTMLå…ƒç´ 
document.getElementById('demo').innerHTML = 'é€™æ”¹è®Šäº†å…ƒç´ çš„å…§å®¹';</textarea>
                <button class="copy-button" onclick="copyCode('code-output')">è¤‡è£½</button>
            </div>
            
            <h3>1.4 JavaScriptèªæ³•åŸºç¤</h3>
            <ul>
                <li>JavaScriptèªå¥ä»¥åˆ†è™Ÿ(;)çµæŸ</li>
                <li>JavaScriptå€åˆ†å¤§å°å¯«</li>
                <li>ä½¿ç”¨//æ·»åŠ å–®è¡Œè¨»é‡‹</li>
                <li>ä½¿ç”¨/* */æ·»åŠ å¤šè¡Œè¨»é‡‹</li>
                <li>JavaScriptå¿½ç•¥ç©ºæ ¼å’Œæ›è¡Œ</li>
            </ul>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-syntax" readonly>// é€™æ˜¯å–®è¡Œè¨»é‡‹
console.log('Hello'); // é€™è¡Œä»£ç¢¼è¼¸å‡º "Hello"

/* é€™æ˜¯
å¤šè¡Œ
è¨»é‡‹ */

let x = 5;      // è²æ˜è®Šæ•¸xä¸¦è³¦å€¼ç‚º5
let y = 6;      // è²æ˜è®Šæ•¸yä¸¦è³¦å€¼ç‚º6
let z = x + y;  // è¨ˆç®—x+yä¸¦å°‡çµæœè³¦å€¼çµ¦z</textarea>
                <button class="copy-button" onclick="copyCode('code-syntax')">è¤‡è£½</button>
            </div>
        </section>

        <section id="variables" class="section">
            <h2>2. è®Šæ•¸èˆ‡æ•¸æ“šé¡å‹</h2>
            <h3>2.1 å®£å‘Šè®Šæ•¸</h3>
            <p>åœ¨JavaScriptä¸­ï¼Œæœ‰ä¸‰ç¨®å®£å‘Šè®Šæ•¸çš„æ–¹å¼ï¼š</p>
            <ul>
                <li><code>var</code>ï¼šèˆŠçš„å®£å‘Šæ–¹å¼ï¼Œæœ‰å‡½æ•¸ä½œç”¨åŸŸ</li>
                <li><code>let</code>ï¼šæ–°çš„å®£å‘Šæ–¹å¼ï¼Œæœ‰å¡Šç´šä½œç”¨åŸŸ</li>
                <li><code>const</code>ï¼šå®£å‘Šå¸¸é‡ï¼Œè³¦å€¼å¾Œä¸èƒ½æ›´æ”¹</li>
            </ul>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-variables" readonly>// ä½¿ç”¨varå®£å‘Šè®Šæ•¸
var a = 10;
var name = "John";

// ä½¿ç”¨letå®£å‘Šè®Šæ•¸ï¼ˆæ¨è–¦ï¼‰
let b = 20;
let title = "Developer";

// ä½¿ç”¨constå®£å‘Šå¸¸é‡
const PI = 3.14159;
const API_URL = "https://api.example.com";

// è®Šæ•¸å®£å‘Šæ²’æœ‰åˆå§‹å€¼
let c;  // cçš„å€¼ç‚ºundefined</textarea>
                <button class="copy-button" onclick="copyCode('code-variables')">è¤‡è£½</button>
            </div>
            
            <h3>2.2 JavaScriptæ•¸æ“šé¡å‹</h3>
            <p>JavaScriptæœ‰8ç¨®åŸºæœ¬æ•¸æ“šé¡å‹ï¼š</p>
            <ol>
                <li><code>String</code>ï¼šå­—ç¬¦ä¸²</li>
                <li><code>Number</code>ï¼šæ•¸å€¼</li>
                <li><code>BigInt</code>ï¼šå¤§æ•´æ•¸</li>
                <li><code>Boolean</code>ï¼šå¸ƒçˆ¾å€¼</li>
                <li><code>undefined</code>ï¼šæœªå®šç¾©</li>
                <li><code>null</code>ï¼šç©ºå€¼</li>
                <li><code>Symbol</code>ï¼šå”¯ä¸€æ¨™è­˜ç¬¦</li>
                <li><code>Object</code>ï¼šç‰©ä»¶ï¼ˆåŒ…æ‹¬Arrayã€Functionã€Dateç­‰ï¼‰</li>
            </ol>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-datatypes" readonly>// Stringï¼ˆå­—ç¬¦ä¸²ï¼‰
let name = "å°æ˜";
let message = 'é€™æ˜¯ä¸€æ®µæ–‡å­—';

// Numberï¼ˆæ•¸å€¼ï¼‰
let age = 25;
let price = 99.99;

// BigIntï¼ˆå¤§æ•´æ•¸ï¼‰
let bigNumber = 1234567890123456789012345n;

// Booleanï¼ˆå¸ƒçˆ¾å€¼ï¼‰
let isActive = true;
let isLoggedIn = false;

// undefinedï¼ˆæœªå®šç¾©ï¼‰
let unknownVar;
console.log(unknownVar); // undefined

// nullï¼ˆç©ºå€¼ï¼‰
let emptyValue = null;

// Symbolï¼ˆå”¯ä¸€æ¨™è­˜ç¬¦ï¼‰
let id = Symbol('id');

// Objectï¼ˆç‰©ä»¶ï¼‰
let person = {
    firstName: "å°æ˜",
    lastName: "ç‹",
    age: 25
};

// Arrayï¼ˆé™£åˆ—ï¼Œæ˜¯Objectçš„ä¸€ç¨®ï¼‰
let colors = ["ç´…", "ç¶ ", "è—"];

// Dateï¼ˆæ—¥æœŸï¼Œæ˜¯Objectçš„ä¸€ç¨®ï¼‰
let today = new Date();</textarea>
                <button class="copy-button" onclick="copyCode('code-datatypes')">è¤‡è£½</button>
            </div>
            
            <h3>2.3 typeofæ“ä½œç¬¦</h3>
            <p><code>typeof</code>æ“ä½œç¬¦ç”¨æ–¼è¿”å›è®Šæ•¸æˆ–è¡¨é”å¼çš„é¡å‹ï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-typeof" readonly>console.log(typeof "å°æ˜");     // è¿”å› "string"
console.log(typeof 123);         // è¿”å› "number"
console.log(typeof true);        // è¿”å› "boolean"
console.log(typeof undefined);   // è¿”å› "undefined"
console.log(typeof null);        // è¿”å› "object"ï¼ˆé€™æ˜¯JavaScriptçš„ä¸€å€‹bugï¼‰
console.log(typeof {});          // è¿”å› "object"
console.log(typeof []);          // è¿”å› "object"
console.log(typeof function(){}); // è¿”å› "function"</textarea>
                <button class="copy-button" onclick="copyCode('code-typeof')">è¤‡è£½</button>
            </div>
        </section>

        <section id="operators" class="section">
            <h2>3. é‹ç®—ç¬¦</h2>
            <h3>3.1 ç®—è¡“é‹ç®—ç¬¦</h3>
            <p>ç”¨æ–¼åŸ·è¡Œæ•¸å€¼è¨ˆç®—çš„åŸºæœ¬é‹ç®—ç¬¦ï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-arithmetic" readonly>let a = 10;
let b = 3;

// åŠ æ³•
let sum = a + b;  // 13

// æ¸›æ³•
let difference = a - b;  // 7

// ä¹˜æ³•
let product = a * b;  // 30

// é™¤æ³•
let quotient = a / b;  // 3.3333...

// å–é¤˜æ•¸ï¼ˆæ¨¡é‹ç®—ï¼‰
let remainder = a % b;  // 1

// å†ªé‹ç®—
let power = a ** b;  // 1000 (10^3)

// å¢é‡å’Œæ¸›é‡é‹ç®—ç¬¦
let c = 5;
c++;  // å¾Œå¢é‡ï¼Œcè®Šç‚º6
++c;  // å‰å¢é‡ï¼Œcè®Šç‚º7
c--;  // å¾Œæ¸›é‡ï¼Œcè®Šç‚º6
--c;  // å‰æ¸›é‡cè®Šç‚º5</textarea>
                <button class="copy-button" onclick="copyCode('code-arithmetic')">è¤‡è£½</button>
            </div>
            
            <h3>3.2 è³¦å€¼é‹ç®—ç¬¦</h3>
            <p>ç”¨æ–¼çµ¦è®Šæ•¸è³¦å€¼çš„é‹ç®—ç¬¦ï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-assignment" readonly>let x = 10;  // åŸºæœ¬è³¦å€¼

// è¤‡åˆè³¦å€¼é‹ç®—ç¬¦
x += 5;   // ç­‰åŒæ–¼ x = x + 5 (xç¾åœ¨æ˜¯15)
x -= 3;   // ç­‰åŒæ–¼ x = x - 3 (xç¾åœ¨æ˜¯12)
x *= 2;   // ç­‰åŒæ–¼ x = x * 2 (xç¾åœ¨æ˜¯24)
x /= 4;   // ç­‰åŒæ–¼ x = x / 4 (xç¾åœ¨æ˜¯6)
x %= 4;   // ç­‰åŒæ–¼ x = x % 4 (xç¾åœ¨æ˜¯2)
x **= 3;  // ç­‰åŒæ–¼ x = x ** 3 (xç¾åœ¨æ˜¯8)</textarea>
                <button class="copy-button" onclick="copyCode('code-assignment')">è¤‡è£½</button>
            </div>
            
            <h3>3.3 æ¯”è¼ƒé‹ç®—ç¬¦</h3>
            <p>ç”¨æ–¼æ¯”è¼ƒå…©å€‹å€¼ä¸¦è¿”å›å¸ƒçˆ¾çµæœï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-comparison" readonly>let a = 5;
let b = 10;
let c = "5";

// ç­‰æ–¼ï¼ˆå€¼ç›¸ç­‰ï¼Œé¡å‹å¯èƒ½ä¸åŒï¼‰
console.log(a == c);  // true

// åš´æ ¼ç­‰æ–¼ï¼ˆå€¼å’Œé¡å‹éƒ½ç›¸ç­‰ï¼‰
console.log(a === c);  // false

// ä¸ç­‰æ–¼
console.log(a != b);  // true

// åš´æ ¼ä¸ç­‰æ–¼
console.log(a !== c);  // true

// å¤§æ–¼
console.log(b > a);  // true

// å°æ–¼
console.log(a < b);  // true

// å¤§æ–¼ç­‰æ–¼
console.log(a >= 5);  // true

// å°æ–¼ç­‰æ–¼
console.log(b <= 10);  // true</textarea>
                <button class="copy-button" onclick="copyCode('code-comparison')">è¤‡è£½</button>
            </div>
            
            <h3>3.4 é‚è¼¯é‹ç®—ç¬¦</h3>
            <p>ç”¨æ–¼çµ„åˆå¤šå€‹æ¢ä»¶çš„é‹ç®—ç¬¦ï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-logical" readonly>let x = 5;
let y = 10;

// é‚è¼¯èˆ‡(AND) - å…©å€‹æ¢ä»¶éƒ½ç‚ºtrueæ™‚è¿”å›true
console.log(x > 0 && y > 0);  // true
console.log(x > 10 && y > 0);  // false

// é‚è¼¯æˆ–(OR) - è‡³å°‘ä¸€å€‹æ¢ä»¶ç‚ºtrueæ™‚è¿”å›true
console.log(x > 0 || y > 0);  // true
console.log(x > 10 || y > 0);  // true
console.log(x > 10 || y > 20);  // false

// é‚è¼¯é(NOT) - åè½‰å¸ƒçˆ¾å€¼
console.log(!true);  // false
console.log(!false);  // true
console.log(!(x > y));  // true</textarea>
                <button class="copy-button" onclick="copyCode('code-logical')">è¤‡è£½</button>
            </div>

            <h3>3.5 ä¸‰å…ƒé‹ç®—ç¬¦</h3>
            <p>æ¢ä»¶é‹ç®—ç¬¦ï¼Œä»¥ç°¡æ½”çš„æ–¹å¼ç·¨å¯«æ¢ä»¶èªå¥ï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-ternary" readonly>// èªæ³•: æ¢ä»¶ ? è¡¨é”å¼1 : è¡¨é”å¼2
// å¦‚æœæ¢ä»¶ç‚ºtrueï¼Œè¿”å›è¡¨é”å¼1çš„å€¼ï¼Œå¦å‰‡è¿”å›è¡¨é”å¼2çš„å€¼

let age = 20;
let status = age >= 18 ? "æˆå¹´" : "æœªæˆå¹´";
console.log(status);  // "æˆå¹´"

// å¯ä»¥åµŒå¥—ä½¿ç”¨
let score = 75;
let grade = score >= 90 ? "A" : score >= 80 ? "B" : score >= 70 ? "C" : score >= 60 ? "D" : "F";
console.log(grade);  // "C"</textarea>
                <button class="copy-button" onclick="copyCode('code-ternary')">è¤‡è£½</button>
            </div>
        </section>
        
        <section id="control-flow" class="section">
            <h2>4. æ§åˆ¶æµç¨‹</h2>
            <h3>4.1 æ¢ä»¶èªå¥</h3>
            <p>æ¢ä»¶èªå¥ç”¨æ–¼æ ¹æ“šä¸åŒæ¢ä»¶åŸ·è¡Œä¸åŒçš„æ“ä½œã€‚</p>
            
            <h4>4.1.1 ifã€else ifã€elseèªå¥</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-if-else" readonly>// åŸºæœ¬ifèªå¥
let hour = 10;

if (hour < 12) {
    console.log("æ—©ä¸Šå¥½ï¼");
}

// if-elseèªå¥
let time = 15;

if (time < 12) {
    console.log("æ—©ä¸Šå¥½ï¼");
} else {
    console.log("ä¸‹åˆå¥½ï¼");
}

// if-else if-elseèªå¥
let score = 85;

if (score >= 90) {
    console.log("å„ªç§€");
} else if (score >= 80) {
    console.log("è‰¯å¥½");
} else if (score >= 70) {
    console.log("ä¸€èˆ¬");
} else if (score >= 60) {
    console.log("åŠæ ¼");
} else {
    console.log("ä¸åŠæ ¼");
}</textarea>
                <button class="copy-button" onclick="copyCode('code-if-else')">è¤‡è£½</button>
            </div>
            
            <h4>4.1.2 switchèªå¥</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-switch" readonly>let day = 3;
let dayName;

switch (day) {
    case 1:
        dayName = "æ˜ŸæœŸä¸€";
        break;
    case 2:
        dayName = "æ˜ŸæœŸäºŒ";
        break;
    case 3:
        dayName = "æ˜ŸæœŸä¸‰";
        break;
    case 4:
        dayName = "æ˜ŸæœŸå››";
        break;
    case 5:
        dayName = "æ˜ŸæœŸäº”";
        break;
    case 6:
        dayName = "æ˜ŸæœŸå…­";
        break;
    case 7:
        dayName = "æ˜ŸæœŸæ—¥";
        break;
    default:
        dayName = "ç„¡æ•ˆçš„æ—¥æœŸ";
}

console.log(dayName);  // è¼¸å‡º "æ˜ŸæœŸä¸‰"</textarea>
                <button class="copy-button" onclick="copyCode('code-switch')">è¤‡è£½</button>
            </div>
            
            <h3>4.2 å¾ªç’°èªå¥</h3>
            <p>å¾ªç’°èªå¥ç”¨æ–¼é‡è¤‡åŸ·è¡ŒæŸæ®µä»£ç¢¼ã€‚</p>
            
            <h4>4.2.1 forå¾ªç’°</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-for" readonly>// åŸºæœ¬forå¾ªç’°
for (let i = 0; i < 5; i++) {
    console.log("å¾ªç’°æ¬¡æ•¸ï¼š" + i);
}

// éæ­·é™£åˆ—
let fruits = ["è˜‹æœ", "é¦™è•‰", "æ©™å­", "è‘¡è„"];
for (let i = 0; i < fruits.length; i++) {
    console.log(fruits[i]);
}

// for...ofå¾ªç’° (ES6)
for (let fruit of fruits) {
    console.log(fruit);
}

// for...inå¾ªç’° (ç”¨æ–¼ç‰©ä»¶å±¬æ€§éæ­·)
let person = {
    firstName: "å°æ˜",
    lastName: "æ",
    age: 30
};
for (let key in person) {
    console.log(key + ": " + person[key]);
}</textarea>
                <button class="copy-button" onclick="copyCode('code-for')">è¤‡è£½</button>
            </div>
            
            <h4>4.2.2 whileå’Œdo-whileå¾ªç’°</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-while" readonly>// whileå¾ªç’°
let i = 0;
while (i < 5) {
    console.log("whileå¾ªç’°ï¼š" + i);
    i++;
}

// do-whileå¾ªç’°ï¼ˆè‡³å°‘åŸ·è¡Œä¸€æ¬¡ï¼‰
let j = 0;
do {
    console.log("do-whileå¾ªç’°ï¼š" + j);
    j++;
} while (j < 5);</textarea>
                <button class="copy-button" onclick="copyCode('code-while')">è¤‡è£½</button>
            </div>
            
            <h3>4.3 è·³è½‰èªå¥</h3>
            <p>è·³è½‰èªå¥ç”¨æ–¼æ§åˆ¶å¾ªç’°æˆ–æ¢ä»¶èªå¥çš„åŸ·è¡Œæµç¨‹ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-break-continue" readonly>// breakèªå¥ - è·³å‡ºå¾ªç’°
for (let i = 0; i < 10; i++) {
    if (i === 5) {
        break;  // ç•¶iç­‰æ–¼5æ™‚ï¼Œè·³å‡ºå¾ªç’°
    }
    console.log("breakç¤ºä¾‹ï¼š" + i);
}

// continueèªå¥ - è·³éç•¶å‰è¿­ä»£
for (let i = 0; i < 10; i++) {
    if (i % 2 === 0) {
        continue;  // ç•¶iæ˜¯å¶æ•¸æ™‚ï¼Œè·³éæ­¤æ¬¡è¿­ä»£
    }
    console.log("continueç¤ºä¾‹ï¼š" + i);  // åªè¼¸å‡ºå¥‡æ•¸
}</textarea>
                <button class="copy-button" onclick="copyCode('code-break-continue')">è¤‡è£½</button>
            </div>
        </section>

        <section id="functions" class="section">
            <h2>5. å‡½æ•¸</h2>
            <h3>5.1 å‡½æ•¸å®šç¾©èˆ‡èª¿ç”¨</h3>
            <p>å‡½æ•¸æ˜¯å¯ä»¥é‡è¤‡ä½¿ç”¨çš„ä»£ç¢¼å¡Šï¼Œç”¨æ–¼åŸ·è¡Œç‰¹å®šä»»å‹™ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-function-basics" readonly>// å‡½æ•¸è²æ˜
function greet() {
    console.log("ä½ å¥½ï¼");
}

// èª¿ç”¨å‡½æ•¸
greet();  // è¼¸å‡º "ä½ å¥½ï¼"

// å¸¶åƒæ•¸çš„å‡½æ•¸
function greetPerson(name) {
    console.log("ä½ å¥½ï¼Œ" + name + "ï¼");
}

greetPerson("å°æ˜");  // è¼¸å‡º "ä½ å¥½ï¼Œå°æ˜ï¼"

// å¸¶è¿”å›å€¼çš„å‡½æ•¸
function sum(a, b) {
    return a + b;
}

let result = sum(5, 3);
console.log(result);  // è¼¸å‡º 8</textarea>
                <button class="copy-button" onclick="copyCode('code-function-basics')">è¤‡è£½</button>
            </div>
            
            <h3>5.2 å‡½æ•¸è¡¨é”å¼èˆ‡ç®­é ­å‡½æ•¸</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-function-expressions" readonly>// å‡½æ•¸è¡¨é”å¼
let greet = function(name) {
    console.log("ä½ å¥½ï¼Œ" + name + "ï¼");
};

greet("å°æ˜");  // è¼¸å‡º "ä½ å¥½ï¼Œå°æ˜ï¼"

// ç®­é ­å‡½æ•¸ (ES6)
let sum = (a, b) => a + b;

console.log(sum(5, 3));  // è¼¸å‡º 8

// å¤šè¡Œç®­é ­å‡½æ•¸
let calculateArea = (width, height) => {
    let area = width * height;
    return area;
};

console.log(calculateArea(5, 3));  // è¼¸å‡º 15</textarea>
                <button class="copy-button" onclick="copyCode('code-function-expressions')">è¤‡è£½</button>
            </div>
            
            <h3>5.3 é»˜èªåƒæ•¸èˆ‡å‰©é¤˜åƒæ•¸</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-function-parameters" readonly>// é»˜èªåƒæ•¸ (ES6)
function greet(name = "è¨ªå®¢") {
    console.log("ä½ å¥½ï¼Œ" + name + "ï¼");
}

greet();  // è¼¸å‡º "ä½ å¥½ï¼Œè¨ªå®¢ï¼"
greet("å°æ˜");  // è¼¸å‡º "ä½ å¥½ï¼Œå°æ˜ï¼"

// å‰©é¤˜åƒæ•¸ (ES6)
function sum(...numbers) {
    let result = 0;
    for (let num of numbers) {
        result += num;
    }
    return result;
}

console.log(sum(1, 2, 3, 4, 5));  // è¼¸å‡º 15</textarea>
                <button class="copy-button" onclick="copyCode('code-function-parameters')">è¤‡è£½</button>
            </div>
            
            <h3>5.4 ä½œç”¨åŸŸèˆ‡é–‰åŒ…</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-scope-closure" readonly>// å…¨å±€ä½œç”¨åŸŸ
let globalVar = "æˆ‘æ˜¯å…¨å±€è®Šæ•¸";

function testScope() {
    // å‡½æ•¸ä½œç”¨åŸŸ
    let localVar = "æˆ‘æ˜¯å±€éƒ¨è®Šæ•¸";
    console.log(globalVar);  // å¯ä»¥è¨ªå•å…¨å±€è®Šæ•¸
    console.log(localVar);   // å¯ä»¥è¨ªå•å±€éƒ¨è®Šæ•¸
}

testScope();
console.log(globalVar);  // å¯ä»¥è¨ªå•å…¨å±€è®Šæ•¸
// console.log(localVar);   // éŒ¯èª¤ï¼ç„¡æ³•è¨ªå•å‡½æ•¸å…§çš„å±€éƒ¨è®Šæ•¸

// å¡Šç´šä½œç”¨åŸŸ (ES6)
if (true) {
    var a = 10;  // varç„¡è¦–å¡Šç´šä½œç”¨åŸŸ
    let b = 20;  // letå°Šé‡å¡Šç´šä½œç”¨åŸŸ
    const c = 30;  // constå°Šé‡å¡Šç´šä½œç”¨åŸŸ
}
console.log(a);  // 10
// console.log(b);  // éŒ¯èª¤ï¼båœ¨å¡Šå¤–ä¸å¯è¦‹
// console.log(c);  // éŒ¯èª¤ï¼cåœ¨å¡Šå¤–ä¸å¯è¦‹

// é–‰åŒ…
function createCounter() {
    let count = 0;  // ç§æœ‰è®Šæ•¸
    
    return function() {
        count++;
        return count;
    };
}

const counter = createCounter();
console.log(counter());  // 1
console.log(counter());  // 2
console.log(counter());  // 3</textarea>
                <button class="copy-button" onclick="copyCode('code-scope-closure')">è¤‡è£½</button>
            </div>
        </section>

        <section id="arrays" class="section">
            <h2>6. é™£åˆ—</h2>
            <h3>6.1 é™£åˆ—å‰µå»ºèˆ‡è¨ªå•</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-array-basics" readonly>// å‰µå»ºé™£åˆ—
let fruits = ["è˜‹æœ", "é¦™è•‰", "æ©™å­"];
let numbers = [1, 2, 3, 4, 5];
let mixed = [1, "æ–‡å­—", true, null, {name: "ç‰©ä»¶"}];

// ä½¿ç”¨Arrayæ§‹é€ å‡½æ•¸
let newArray = new Array(3);  // å‰µå»ºé•·åº¦ç‚º3çš„ç©ºé™£åˆ—
let colors = new Array("ç´…", "ç¶ ", "è—");

// è¨ªå•é™£åˆ—å…ƒç´ 
console.log(fruits[0]);  // "è˜‹æœ"
console.log(fruits[1]);  // "é¦™è•‰"
console.log(fruits[2]);  // "æ©™å­"

// ä¿®æ”¹é™£åˆ—å…ƒç´ 
fruits[1] = "è‰è“";
console.log(fruits);  // ["è˜‹æœ", "è‰è“", "æ©™å­"]

// é™£åˆ—å±¬æ€§
console.log(fruits.length);  // 3</textarea>
                <button class="copy-button" onclick="copyCode('code-array-basics')">è¤‡è£½</button>
            </div>
            
            <h3>6.2 é™£åˆ—æ–¹æ³•</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-array-methods" readonly>let fruits = ["è˜‹æœ", "é¦™è•‰", "æ©™å­"];

// æ·»åŠ å’Œåˆªé™¤å…ƒç´ 
fruits.push("è‘¡è„");       // åœ¨æœ«å°¾æ·»åŠ å…ƒç´ 
console.log(fruits);       // ["è˜‹æœ", "é¦™è•‰", "æ©™å­", "è‘¡è„"]

fruits.pop();              // åˆªé™¤æœ«å°¾å…ƒç´ 
console.log(fruits);       // ["è˜‹æœ", "é¦™è•‰", "æ©™å­"]

fruits.unshift("è‰è“");    // åœ¨é–‹é ­æ·»åŠ å…ƒç´ 
console.log(fruits);       // ["è‰è“", "è˜‹æœ", "é¦™è•‰", "æ©™å­"]

fruits.shift();            // åˆªé™¤é–‹é ­å…ƒç´ 
console.log(fruits);       // ["è˜‹æœ", "é¦™è•‰", "æ©™å­"]

// é€£æ¥é™£åˆ—
let moreFruits = ["è‘¡è„", "èŠ’æœ"];
let allFruits = fruits.concat(moreFruits);
console.log(allFruits);    // ["è˜‹æœ", "é¦™è•‰", "æ©™å­", "è‘¡è„", "èŠ’æœ"]

// åˆ‡ç‰‡å’Œæ‹¼æ¥
let citrus = allFruits.slice(2, 4);  // å¾ç´¢å¼•2åˆ°ç´¢å¼•3ï¼ˆä¸åŒ…æ‹¬4ï¼‰
console.log(citrus);       // ["æ©™å­", "è‘¡è„"]

allFruits.splice(1, 2, "ç¼çŒ´æ¡ƒ", "æ¢¨");  // å¾ç´¢å¼•1é–‹å§‹åˆªé™¤2å€‹å…ƒç´ ï¼Œç„¶å¾Œæ’å…¥æ–°å…ƒç´ 
console.log(allFruits);    // ["è˜‹æœ", "ç¼çŒ´æ¡ƒ", "æ¢¨", "è‘¡è„", "èŠ’æœ"]

// æŸ¥æ‰¾å…ƒç´ 
console.log(allFruits.indexOf("ç¼çŒ´æ¡ƒ"));  // 1
console.log(allFruits.includes("è˜‹æœ"));   // true

// æ’åºå’Œåè½‰
let numbers = [3, 1, 4, 1, 5, 9, 2, 6];
numbers.sort();            // æŒ‰å­—æ¯é †åºæ’åº
console.log(numbers);      // [1, 1, 2, 3, 4, 5, 6, 9]

numbers.reverse();         // åè½‰é™£åˆ—
console.log(numbers);      // [9, 6, 5, 4, 3, 2, 1, 1]</textarea>
                <button class="copy-button" onclick="copyCode('code-array-methods')">è¤‡è£½</button>
            </div>
            
            <h3>6.3 é™£åˆ—è¿­ä»£æ–¹æ³•</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-array-iteration" readonly>let numbers = [1, 2, 3, 4, 5];

// forEach - éæ­·æ¯å€‹å…ƒç´ 
numbers.forEach(function(num) {
    console.log(num * 2);
});

// map - å‰µå»ºæ–°é™£åˆ—ï¼Œå…¶çµæœæ˜¯å°æ¯å€‹å…ƒç´ èª¿ç”¨å‡½æ•¸çš„çµæœ
let doubled = numbers.map(function(num) {
    return num * 2;
});
console.log(doubled);  // [2, 4, 6, 8, 10]

// filter - å‰µå»ºæ–°é™£åˆ—ï¼Œå…¶å…ƒç´ é€šéå‡½æ•¸æ¸¬è©¦
let evens = numbers.filter(function(num) {
    return num % 2 === 0;
});
console.log(evens);  // [2, 4]

// reduce - å°‡é™£åˆ—æ¸›å°‘ç‚ºå–®å€‹å€¼
let sum = numbers.reduce(function(total, num) {
    return total + num;
}, 0);
console.log(sum);  // 15

// some - æª¢æŸ¥æ˜¯å¦è‡³å°‘æœ‰ä¸€å€‹å…ƒç´ é€šéæ¸¬è©¦
let hasEven = numbers.some(function(num) {
    return num % 2 === 0;
});
console.log(hasEven);  // true

// every - æª¢æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½é€šéæ¸¬è©¦
let allEven = numbers.every(function(num) {
    return num % 2 === 0;
});
console.log(allEven);  // false

// ä½¿ç”¨ç®­é ­å‡½æ•¸ç°¡åŒ–
let tripled = numbers.map(num => num * 3);
console.log(tripled);  // [3, 6, 9, 12, 15]</textarea>
                <button class="copy-button" onclick="copyCode('code-array-iteration')">è¤‡è£½</button>
            </div>
        </section>

        <section id="objects" class="section">
            <h2>7. ç‰©ä»¶</h2>
            <h3>7.1 ç‰©ä»¶å‰µå»ºèˆ‡è¨ªå•</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-object-basics" readonly>// ç‰©ä»¶å­—é¢é‡
let person = {
    firstName: "å°æ˜",
    lastName: "ç‹",
    age: 30,
    email: "xiaoming@example.com",
    isStudent: false,
    address: {
        city: "å°åŒ—",
        country: "å°ç£"
    }
};

// è¨ªå•ç‰©ä»¶å±¬æ€§
console.log(person.firstName);  // "å°æ˜"
console.log(person["lastName"]);  // "ç‹"
console.log(person.address.city);  // "å°åŒ—"

// ä¿®æ”¹å±¬æ€§
person.age = 31;
person["email"] = "newmail@example.com";
console.log(person.age);  // 31
console.log(person.email);  // "newmail@example.com"

// æ·»åŠ æ–°å±¬æ€§
person.phone = "123-456-7890";
console.log(person.phone);  // "123-456-7890"

// åˆªé™¤å±¬æ€§
delete person.isStudent;
console.log(person.isStudent);  // undefined</textarea>
                <button class="copy-button" onclick="copyCode('code-object-basics')">è¤‡è£½</button>
            </div>
            
            <h3>7.2 ç‰©ä»¶æ–¹æ³•</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-object-methods" readonly>// ç‰©ä»¶åŒ…å«æ–¹æ³•
let person = {
    firstName: "å°æ˜",
    lastName: "ç‹",
    
    // ç‰©ä»¶æ–¹æ³•
    fullName: function() {
        return this.firstName + " " + this.lastName;
    },
    
    // ES6ç°¡çŸ­æ–¹æ³•èªæ³•
    greet() {
        return "ä½ å¥½ï¼Œæˆ‘æ˜¯ " + this.fullName();
    }
};

console.log(person.fullName());  // "å°æ˜ ç‹"
console.log(person.greet());  // "ä½ å¥½ï¼Œæˆ‘æ˜¯ å°æ˜ ç‹"

// ç²å–æ‰€æœ‰éµï¼ˆå±¬æ€§åï¼‰
let keys = Object.keys(person);
console.log(keys);  // ["firstName", "lastName", "fullName", "greet"]

// ç²å–æ‰€æœ‰å€¼
let values = Object.values(person);
console.log(values);  // ["å°æ˜", "ç‹", [Function: fullName], [Function: greet]]

// ç²å–æ‰€æœ‰éµå€¼å°
let entries = Object.entries(person);
console.log(entries);  // [["firstName", "å°æ˜"], ["lastName", "ç‹"], ...]

// æª¢æŸ¥å±¬æ€§æ˜¯å¦å­˜åœ¨
console.log("firstName" in person);  // true
console.log("age" in person);  // false
console.log(person.hasOwnProperty("firstName"));  // true</textarea>
                <button class="copy-button" onclick="copyCode('code-object-methods')">è¤‡è£½</button>
            </div>
            
            <h3>7.3 æ§‹é€ å‡½æ•¸å’ŒåŸå‹</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-constructors" readonly>// æ§‹é€ å‡½æ•¸
function Person(firstName, lastName, age) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.age = age;
    
    this.fullName = function() {
        return this.firstName + " " + this.lastName;
    };
}

// å‰µå»ºå¯¦ä¾‹
let person1 = new Person("å°æ˜", "ç‹", 30);
let person2 = new Person("å°è¯", "æ", 25);

console.log(person1.fullName());  // "å°æ˜ ç‹"
console.log(person2.fullName());  // "å°è¯ æ"

// ä½¿ç”¨åŸå‹æ·»åŠ æ–¹æ³• (æ›´é«˜æ•ˆï¼Œæ‰€æœ‰å¯¦ä¾‹å…±äº«åŒä¸€å€‹æ–¹æ³•)
Person.prototype.greet = function() {
    return "ä½ å¥½ï¼Œæˆ‘æ˜¯ " + this.fullName();
};

console.log(person1.greet());  // "ä½ å¥½ï¼Œæˆ‘æ˜¯ å°æ˜ ç‹"
console.log(person2.greet());  // "ä½ å¥½ï¼Œæˆ‘æ˜¯ å°è¯ æ"</textarea>
                <button class="copy-button" onclick="copyCode('code-constructors')">è¤‡è£½</button>
            </div>
            
            <h3>7.4 ES6é¡</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-classes" readonly>// ES6é¡èªæ³•
class Person {
    constructor(firstName, lastName, age) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.age = age;
    }
    
    // æ–¹æ³•
    fullName() {
        return this.firstName + " " + this.lastName;
    }
    
    greet() {
        return `ä½ å¥½ï¼Œæˆ‘æ˜¯ ${this.fullName()}`;
    }
    
    // éœæ…‹æ–¹æ³•
    static createAnonymous() {
        return new Person("ç„¡åæ°", "", 0);
    }
}

// å‰µå»ºå¯¦ä¾‹
let person1 = new Person("å°æ˜", "ç‹", 30);
console.log(person1.fullName());  // "å°æ˜ ç‹"
console.log(person1.greet());     // "ä½ å¥½ï¼Œæˆ‘æ˜¯ å°æ˜ ç‹"

// ä½¿ç”¨éœæ…‹æ–¹æ³•
let anonymous = Person.createAnonymous();
console.log(anonymous.fullName());  // "ç„¡åæ° "

// ç¹¼æ‰¿
class Student extends Person {
    constructor(firstName, lastName, age, grade) {
        // å‘¼å«çˆ¶é¡æ§‹é€ å‡½æ•¸
        super(firstName, lastName, age);  // å‘¼å«çˆ¶é¡æ§‹é€ å‡½æ•¸
        this.grade = grade;
    }
    
    study() {
        return `${this.fullName()}æ­£åœ¨å­¸ç¿’`;
    }
    
    // è¦†å¯«çˆ¶é¡æ–¹æ³•
    greet() {
        return `ä½ å¥½ï¼Œæˆ‘æ˜¯å­¸ç”Ÿ ${this.fullName()}ï¼Œæˆ‘åœ¨${this.grade}å¹´ç´š`;
    }
}

let student1 = new Student("å°è¯", "æ", 15, "é«˜ä¸€");
console.log(student1.fullName());  // "å°è¯ æ"
console.log(student1.greet());     // "ä½ å¥½ï¼Œæˆ‘æ˜¯å­¸ç”Ÿ å°è¯ æï¼Œæˆ‘åœ¨é«˜ä¸€å¹´ç´š"
console.log(student1.study());     // "å°è¯ ææ­£åœ¨å­¸ç¿’"</textarea>
                <button class="copy-button" onclick="copyCode('code-classes')">è¤‡è£½</button>
            </div>
        </section>
        
        <section id="dom" class="section">
            <h2>8. DOMæ“ä½œ</h2>
            <h3>8.1 ä»€éº¼æ˜¯DOMï¼Ÿ</h3>
            <p>DOM (Document Object Model) æ˜¯HTMLå’ŒXMLæ–‡æª”çš„ç¨‹å¼ä»‹é¢ã€‚å®ƒå°‡ç¶²é è¡¨ç¤ºç‚ºæ¨¹çµæ§‹ï¼Œä½¿JavaScriptèƒ½å¤ è¨ªå•å’Œæ“ä½œç¶²é å…§å®¹ã€‚</p>
            
            <div class="example">
                <p>DOMæ¨¹çµæ§‹ç¤ºä¾‹ï¼š</p>
                <pre>
document
  â””â”€â”€ html
       â”œâ”€â”€ head
       â”‚    â”œâ”€â”€ title
       â”‚    â””â”€â”€ meta
       â””â”€â”€ body
            â”œâ”€â”€ div
            â”‚    â””â”€â”€ p
            â””â”€â”€ script
                </pre>
            </div>
            
            <h3>8.2 é¸æ“‡DOMå…ƒç´ </h3>
            <p>JavaScriptæä¾›å¤šç¨®æ–¹æ³•ä¾†é¸æ“‡DOMå…ƒç´ ï¼š</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-dom-select" readonly>// é€šéIDé¸æ“‡å…ƒç´ 
let elementById = document.getElementById('myId');

// é€šéé¡åé¸æ“‡å…ƒç´ ï¼ˆè¿”å›HTMLCollectionï¼‰
let elementsByClass = document.getElementsByClassName('myClass');

// é€šéæ¨™ç±¤åé¸æ“‡å…ƒç´ ï¼ˆè¿”å›HTMLCollectionï¼‰
let elementsByTag = document.getElementsByTagName('div');

// é€šéCSSé¸æ“‡å™¨é¸æ“‡ç¬¬ä¸€å€‹åŒ¹é…çš„å…ƒç´ 
let elementByQuery = document.querySelector('.myClass');

// é€šéCSSé¸æ“‡å™¨é¸æ“‡æ‰€æœ‰åŒ¹é…çš„å…ƒç´ ï¼ˆè¿”å›NodeListï¼‰
let elementsByQuery = document.querySelectorAll('div.myClass');

// é¸æ“‡ç‰¹å®šçš„è¡¨å–®å…ƒç´ 
let form = document.forms['myForm'];
let formElement = form.elements['myInput'];</textarea>
                <button class="copy-button" onclick="copyCode('code-dom-select')">è¤‡è£½</button>
            </div>
            
            <h3>8.3 æ“ä½œDOMå…ƒç´ </h3>
            
            <h4>8.3.1 ä¿®æ”¹å…ƒç´ å…§å®¹</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-dom-content" readonly>// ä½¿ç”¨innerHTMLä¿®æ”¹å…ƒç´ çš„HTMLå…§å®¹
document.getElementById('myElement').innerHTML = '<strong>æ–°çš„HTMLå…§å®¹</strong>';

// ä½¿ç”¨textContentä¿®æ”¹å…ƒç´ çš„æ–‡æœ¬å…§å®¹ï¼ˆä¸è§£æHTMLï¼‰
document.getElementById('myElement').textContent = 'ç´”æ–‡æœ¬å…§å®¹';

// ä½¿ç”¨innerTextä¿®æ”¹å…ƒç´ çš„å¯è¦‹æ–‡æœ¬å…§å®¹
document.getElementById('myElement').innerText = 'å¯è¦‹æ–‡æœ¬å…§å®¹';</textarea>
                <button class="copy-button" onclick="copyCode('code-dom-content')">è¤‡è£½</button>
            </div>
            
            <h4>8.3.2 ä¿®æ”¹å…ƒç´ å±¬æ€§</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-dom-attributes" readonly>// è¨­ç½®å±¬æ€§
document.getElementById('myImage').src = 'new-image.jpg';
document.getElementById('myLink').href = 'https://example.com';

// ä½¿ç”¨setAttributeæ–¹æ³•
document.getElementById('myElement').setAttribute('class', 'newClass');

// ç²å–å±¬æ€§
let imgSrc = document.getElementById('myImage').src;
let attrValue = document.getElementById('myElement').getAttribute('data-custom');

// åˆªé™¤å±¬æ€§
document.getElementById('myElement').removeAttribute('disabled');</textarea>
                <button class="copy-button" onclick="copyCode('code-dom-attributes')">è¤‡è£½</button>
            </div>
            
            <h4>8.3.3 ä¿®æ”¹å…ƒç´ æ¨£å¼</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-dom-styles" readonly>// ç›´æ¥ä¿®æ”¹è¡Œå…§æ¨£å¼
let element = document.getElementById('myElement');
element.style.color = 'red';
element.style.fontSize = '20px';
element.style.backgroundColor = '#f0f0f0';

// ä¸€æ¬¡ä¿®æ”¹å¤šå€‹æ¨£å¼ï¼ˆä½¿ç”¨cssTextï¼‰
element.style.cssText = 'color: blue; font-size: 16px; padding: 10px;';

// ä½¿ç”¨classListæ·»åŠ /ç§»é™¤/åˆ‡æ›é¡
element.classList.add('highlight');
element.classList.remove('old-class');
element.classList.toggle('active');
element.classList.replace('old-class', 'new-class');

// æª¢æŸ¥æ˜¯å¦åŒ…å«æŸå€‹é¡
let hasClass = element.classList.contains('highlight');</textarea>
                <button class="copy-button" onclick="copyCode('code-dom-styles')">è¤‡è£½</button>
            </div>
            
            <h3>8.4 å‰µå»ºå’Œåˆªé™¤å…ƒç´ </h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-dom-create-remove" readonly>// å‰µå»ºæ–°å…ƒç´ 
let newDiv = document.createElement('div');
let newText = document.createTextNode('é€™æ˜¯æ–°å‰µå»ºçš„æ–‡æœ¬');

// è¨­ç½®æ–°å…ƒç´ çš„å±¬æ€§å’Œå…§å®¹
newDiv.id = 'newDiv';
newDiv.className = 'container';
newDiv.appendChild(newText);  // æ·»åŠ æ–‡æœ¬åˆ°div
newDiv.innerHTML = '<span>ä½¿ç”¨innerHTMLè¨­ç½®å…§å®¹</span>';

// å°‡æ–°å…ƒç´ æ·»åŠ åˆ°DOMä¸­
document.body.appendChild(newDiv);  // æ·»åŠ åˆ°bodyæœ«å°¾
document.getElementById('parent').prepend(newDiv);  // æ·»åŠ åˆ°çˆ¶å…ƒç´ é–‹é ­

// åœ¨ç‰¹å®šå…ƒç´ å‰/å¾Œæ’å…¥
let referenceElement = document.getElementById('reference');
referenceElement.parentNode.insertBefore(newDiv, referenceElement);  // åœ¨åƒè€ƒå…ƒç´ å‰æ’å…¥
referenceElement.after(newDiv);  // åœ¨åƒè€ƒå…ƒç´ å¾Œæ’å…¥ï¼ˆæ–°æ–¹æ³•ï¼‰

// æ›¿æ›å…ƒç´ 
let oldElement = document.getElementById('old');
oldElement.parentNode.replaceChild(newDiv, oldElement);
// æˆ–ä½¿ç”¨æ–°æ–¹æ³•
oldElement.replaceWith(newDiv);

// åˆªé™¤å…ƒç´ 
let elementToRemove = document.getElementById('toRemove');
elementToRemove.parentNode.removeChild(elementToRemove);
// æˆ–ä½¿ç”¨æ–°æ–¹æ³•
elementToRemove.remove();</textarea>
                <button class="copy-button" onclick="copyCode('code-dom-create-remove')">è¤‡è£½</button>
            </div>
            
            <h3>8.5 DOMç¯€é»é—œä¿‚</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-dom-traversing" readonly>let element = document.getElementById('myElement');

// çˆ¶ç¯€é»
let parent = element.parentNode;  // ç²å–çˆ¶ç¯€é»
let parentElement = element.parentElement;  // ç²å–çˆ¶å…ƒç´ ç¯€é»

// å­ç¯€é»
let children = element.childNodes;  // æ‰€æœ‰å­ç¯€é»ï¼ˆåŒ…æ‹¬æ–‡æœ¬å’Œè¨»é‡‹ï¼‰
let childElements = element.children;  // åƒ…å­å…ƒç´ ç¯€é»
let firstChild = element.firstChild;  // ç¬¬ä¸€å€‹å­ç¯€é»
let firstElement = element.firstElementChild;  // ç¬¬ä¸€å€‹å­å…ƒç´ 
let lastChild = element.lastChild;  // æœ€å¾Œä¸€å€‹å­ç¯€é»
let lastElement = element.lastElementChild;  // æœ€å¾Œä¸€å€‹å­å…ƒç´ 
let childCount = element.childElementCount;  // å­å…ƒç´ æ•¸é‡

// å…„å¼Ÿç¯€é»
let next = element.nextSibling;  // ä¸‹ä¸€å€‹å…„å¼Ÿç¯€é»
let nextElement = element.nextElementSibling;  // ä¸‹ä¸€å€‹å…„å¼Ÿå…ƒç´ 
let previous = element.previousSibling;  // ä¸Šä¸€å€‹å…„å¼Ÿç¯€é»
let previousElement = element.previousElementSibling;  // ä¸Šä¸€å€‹å…„å¼Ÿå…ƒç´ </textarea>
                <button class="copy-button" onclick="copyCode('code-dom-traversing')">è¤‡è£½</button>
            </div>
        </section>

        <section id="events" class="section">
            <h2>9. äº‹ä»¶è™•ç†</h2>
            <h3>9.1 ä»€éº¼æ˜¯äº‹ä»¶ï¼Ÿ</h3>
            <p>äº‹ä»¶æ˜¯ç”¨æˆ¶æˆ–ç€è¦½å™¨åŸ·è¡Œçš„å‹•ä½œï¼Œå¦‚é»æ“ŠæŒ‰éˆ•ã€è¼‰å…¥é é¢æˆ–æäº¤è¡¨å–®ã€‚JavaScriptå¯ä»¥åµæ¸¬é€™äº›äº‹ä»¶ä¸¦ä½œå‡ºåæ‡‰ã€‚</p>
            
            <h3>9.2 äº‹ä»¶è™•ç†æ–¹æ³•</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-events-handlers" readonly>// æ–¹æ³•1ï¼šHTMLå±¬æ€§ï¼ˆä¸æ¨è–¦ï¼‰
// <button onclick="alert('æŒ‰éˆ•è¢«é»æ“Šäº†')">é»æ“Šæˆ‘</button>

// æ–¹æ³•2ï¼šDOMå±¬æ€§
let button = document.getElementById('myButton');
button.onclick = function() {
    alert('æŒ‰éˆ•è¢«é»æ“Šäº†');
};

// æ–¹æ³•3ï¼šaddEventListenerï¼ˆæ¨è–¦ï¼‰
button.addEventListener('click', function() {
    alert('æŒ‰éˆ•è¢«é»æ“Šäº†ï¼ˆä½¿ç”¨addEventListenerï¼‰');
});

// ä½¿ç”¨å‘½åå‡½æ•¸ä½œç‚ºäº‹ä»¶è™•ç†å™¨
function handleClick() {
    alert('è™•ç†é»æ“Šäº‹ä»¶');
}
button.addEventListener('click', handleClick);

// ç§»é™¤äº‹ä»¶ç›£è½å™¨
button.removeEventListener('click', handleClick);</textarea>
                <button class="copy-button" onclick="copyCode('code-events-handlers')">è¤‡è£½</button>
            </div>
            
            <h3>9.3 å¸¸è¦‹äº‹ä»¶é¡å‹</h3>
            
            <table>
                <tr>
                    <th>äº‹ä»¶é¡åˆ¥</th>
                    <th>äº‹ä»¶åç¨±</th>
                    <th>èªªæ˜</th>
                </tr>
                <tr>
                    <td rowspan="3">æ»‘é¼ äº‹ä»¶</td>
                    <td>click</td>
                    <td>ç•¶å…ƒç´ è¢«é»æ“Šæ™‚</td>
                </tr>
                <tr>
                    <td>mouseover / mouseout</td>
                    <td>ç•¶æ»‘é¼ æŒ‡é‡é€²å…¥/é›¢é–‹å…ƒç´ æ™‚</td>
                </tr>
                <tr>
                    <td>mousedown / mouseup</td>
                    <td>ç•¶åœ¨å…ƒç´ ä¸ŠæŒ‰ä¸‹/é‡‹æ”¾æ»‘é¼ æŒ‰éˆ•æ™‚</td>
                </tr>
                <tr>
                    <td rowspan="2">éµç›¤äº‹ä»¶</td>
                    <td>keydown / keyup</td>
                    <td>ç•¶éµç›¤æŒ‰éµè¢«æŒ‰ä¸‹/é‡‹æ”¾æ™‚</td>
                </tr>
                <tr>
                    <td>keypress</td>
                    <td>ç•¶æŒ‰éµè¢«æŒ‰ä¸‹ä¸¦ç”¢ç”Ÿå­—ç¬¦æ™‚ï¼ˆå·²æ£„ç”¨ï¼‰</td>
                </tr>
                <tr>
                    <td rowspan="2">è¡¨å–®äº‹ä»¶</td>
                    <td>submit</td>
                    <td>ç•¶è¡¨å–®è¢«æäº¤æ™‚</td>
                </tr>
                <tr>
                    <td>change / input</td>
                    <td>ç•¶è¡¨å–®å…ƒç´ çš„å€¼æ”¹è®Šæ™‚</td>
                </tr>
                <tr>
                    <td rowspan="2">æ–‡æª”/çª—å£äº‹ä»¶</td>
                    <td>load / DOMContentLoaded</td>
                    <td>ç•¶é é¢æˆ–DOMå®Œæˆè¼‰å…¥æ™‚</td>
                </tr>
                <tr>
                    <td>resize / scroll</td>
                    <td>ç•¶çª—å£èª¿æ•´å¤§å°æˆ–é é¢æ»¾å‹•æ™‚</td>
                </tr>
            </table>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-events-examples" readonly>// æ»‘é¼ äº‹ä»¶
document.getElementById('myElement').addEventListener('click', function(event) {
    console.log('å…ƒç´ è¢«é»æ“Šäº†');
});

document.getElementById('myElement').addEventListener('mouseover', function(event) {
    this.style.backgroundColor = 'yellow';
});

document.getElementById('myElement').addEventListener('mouseout', function(event) {
    this.style.backgroundColor = '';
});

// éµç›¤äº‹ä»¶
document.addEventListener('keydown', function(event) {
    console.log('éµè¢«æŒ‰ä¸‹ï¼š' + event.key);
    if (event.key === 'Enter') {
        alert('ä½ æŒ‰ä¸‹äº†Enteréµï¼');
    }
});

// è¡¨å–®äº‹ä»¶
document.getElementById('myForm').addEventListener('submit', function(event) {
    event.preventDefault();  // é˜»æ­¢è¡¨å–®æäº¤
    console.log('è¡¨å–®å·²æäº¤');
});

document.getElementById('myInput').addEventListener('change', function(event) {
    console.log('è¼¸å…¥å€¼å·²æ”¹è®Šç‚ºï¼š' + this.value);
});

document.getElementById('myInput').addEventListener('input', function(event) {
    console.log('æ­£åœ¨è¼¸å…¥ï¼š' + this.value);
});

// æ–‡æª”/çª—å£äº‹ä»¶
window.addEventListener('load', function(event) {
    console.log('é é¢å®Œå…¨è¼‰å…¥ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä¾è³´è³‡æº');
});

document.addEventListener('DOMContentLoaded', function(event) {
    console.log('DOMçµæ§‹å·²å®Œå…¨è¼‰å…¥å’Œè§£æ');
});

window.addEventListener('resize', function(event) {
    console.log('çª—å£å¤§å°å·²æ”¹è®Š');
});

window.addEventListener('scroll', function(event) {
    console.log('é é¢å·²æ»¾å‹•');
});</textarea>
                <button class="copy-button" onclick="copyCode('code-events-examples')">è¤‡è£½</button>
            </div>
            
            <h3>9.4 äº‹ä»¶å°è±¡</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-event-object" readonly>document.getElementById('myButton').addEventListener('click', function(event) {
    // äº‹ä»¶å°è±¡çš„é€šç”¨å±¬æ€§
    console.log('äº‹ä»¶é¡å‹ï¼š' + event.type);  // "click"
    console.log('äº‹ä»¶ç›®æ¨™ï¼š' + event.target);  // è¢«é»æ“Šçš„å…ƒç´ 
    console.log('ç•¶å‰ç›®æ¨™ï¼š' + event.currentTarget);  // é™„åŠ äº‹ä»¶è™•ç†å™¨çš„å…ƒç´ 
    console.log('äº‹ä»¶æ™‚é–“æˆ³ï¼š' + event.timeStamp);
    
    // æ»‘é¼ äº‹ä»¶ç‰¹æœ‰å±¬æ€§
    console.log('æ»‘é¼ ä½ç½®ï¼š' + event.clientX + ', ' + event.clientY);  // ç›¸å°æ–¼è¦–çª—
    console.log('æŒ‰ä¸‹çš„æŒ‰éˆ•ï¼š' + event.button);  // 0=å·¦éµ, 1=ä¸­éµ, 2=å³éµ
    
    // é˜»æ­¢é»˜èªè¡Œç‚º
    event.preventDefault();
    
    // é˜»æ­¢äº‹ä»¶å†’æ³¡
    event.stopPropagation();
});

// éµç›¤äº‹ä»¶å°è±¡
document.addEventListener('keydown', function(event) {
    console.log('æŒ‰éµï¼š' + event.key);  // æŒ‰éµå€¼
    console.log('éµç¢¼ï¼š' + event.keyCode);  // å·²æ£„ç”¨
    console.log('Altéµï¼š' + event.altKey);  // æ˜¯å¦æŒ‰ä¸‹Altéµ
    console.log('Ctrléµï¼š' + event.ctrlKey);  // æ˜¯å¦æŒ‰ä¸‹Ctrléµ
    console.log('Shiftéµï¼š' + event.shiftKey);  // æ˜¯å¦æŒ‰ä¸‹Shiftéµ
});</textarea>
                <button class="copy-button" onclick="copyCode('code-event-object')">è¤‡è£½</button>
            </div>
            
            <h3>9.5 äº‹ä»¶å‚³æ’­ï¼šå†’æ³¡èˆ‡æ•ç²</h3>
            
            <div class="example">
                <p>äº‹ä»¶å‚³æ’­çš„ä¸‰å€‹éšæ®µï¼š</p>
                <ol>
                    <li><strong>æ•ç²éšæ®µ</strong>ï¼šäº‹ä»¶å¾Windowå‘ä¸‹å‚³æ’­åˆ°ç›®æ¨™å…ƒç´ </li>
                    <li><strong>ç›®æ¨™éšæ®µ</strong>ï¼šäº‹ä»¶åˆ°é”ç›®æ¨™å…ƒç´ </li>
                    <li><strong>å†’æ³¡éšæ®µ</strong>ï¼šäº‹ä»¶å¾ç›®æ¨™å…ƒç´ å‘ä¸Šå†’æ³¡åˆ°Window</li>
                </ol>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-event-propagation" readonly>// é»˜èªæƒ…æ³ä¸‹ï¼Œäº‹ä»¶è™•ç†å™¨åœ¨å†’æ³¡éšæ®µåŸ·è¡Œ
document.getElementById('child').addEventListener('click', function(event) {
    console.log('å­å…ƒç´ è¢«é»æ“Š');
});

document.getElementById('parent').addEventListener('click', function(event) {
    console.log('çˆ¶å…ƒç´ è¢«é»æ“Š');  // é»æ“Šå­å…ƒç´ æ™‚ä¹ŸæœƒåŸ·è¡Œ
});

// è¨­ç½®ç‚ºæ•ç²éšæ®µåŸ·è¡Œï¼ˆç¬¬ä¸‰å€‹åƒæ•¸ç‚ºtrueï¼‰
document.getElementById('parent').addEventListener('click', function(event) {
    console.log('çˆ¶å…ƒç´ æ•ç²éšæ®µ');
}, true);

document.getElementById('child').addEventListener('click', function(event) {
    console.log('å­å…ƒç´ æ•ç²éšæ®µ');
}, true);

// é»æ“Šå­å…ƒç´ æ™‚çš„åŸ·è¡Œé †åºï¼š
// 1. çˆ¶å…ƒç´ æ•ç²éšæ®µ
// 2. å­å…ƒç´ æ•ç²éšæ®µ
// 3. å­å…ƒç´ è¢«é»æ“Šï¼ˆå†’æ³¡éšæ®µï¼‰
// 4. çˆ¶å…ƒç´ è¢«é»æ“Šï¼ˆå†’æ³¡éšæ®µï¼‰

// é˜»æ­¢å†’æ³¡
document.getElementById('child').addEventListener('click', function(event) {
    console.log('å­å…ƒç´ è¢«é»æ“Š');
    event.stopPropagation();  // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œçˆ¶å…ƒç´ çš„è™•ç†å™¨ä¸æœƒåŸ·è¡Œ
});</textarea>
                <button class="copy-button" onclick="copyCode('code-event-propagation')">è¤‡è£½</button>
            </div>
            
            <h3>9.6 äº‹ä»¶å§”æ´¾</h3>
            <p>äº‹ä»¶å§”æ´¾æ˜¯ä¸€ç¨®åˆ©ç”¨äº‹ä»¶å†’æ³¡çš„æŠ€è¡“ï¼Œå®ƒå…è¨±æˆ‘å€‘å°‡äº‹ä»¶ç›£è½å™¨æ·»åŠ åˆ°çˆ¶å…ƒç´ ï¼Œè€Œä¸æ˜¯æ¯å€‹å­å…ƒç´ ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-event-delegation" readonly>// ä¸ä½¿ç”¨äº‹ä»¶å§”æ´¾ï¼ˆæ•ˆç‡ä½ä¸‹ï¼‰
let items = document.getElementsByClassName('item');
for (let i = 0; i < items.length; i++) {
    items[i].addEventListener('click', function(event) {
        console.log('é»æ“Šäº†é …ç›®ï¼š' + this.textContent);
    });
}

// ä½¿ç”¨äº‹ä»¶å§”æ´¾ï¼ˆæ›´é«˜æ•ˆï¼‰
document.getElementById('itemList').addEventListener('click', function(event) {
    if (event.target.className === 'item') {
        console.log('é»æ“Šäº†é …ç›®ï¼š' + event.target.textContent);
    }
});

// å‹•æ…‹æ·»åŠ å…ƒç´ æ™‚ï¼Œäº‹ä»¶å§”æ´¾ç‰¹åˆ¥æœ‰ç”¨
let newItem = document.createElement('li');
newItem.className = 'item';
newItem.textContent = 'æ–°é …ç›®';
document.getElementById('itemList').appendChild(newItem);
// æ–°æ·»åŠ çš„é …ç›®è‡ªå‹•å…·æœ‰é»æ“ŠåŠŸèƒ½ï¼Œä¸éœ€è¦å–®ç¨æ·»åŠ äº‹ä»¶ç›£è½å™¨</textarea>
                <button class="copy-button" onclick="copyCode('code-event-delegation')">è¤‡è£½</button>
            </div>
        </section>

        <section id="async" class="section">
            <h2>10. ç•°æ­¥ç·¨ç¨‹</h2>
            <h3>10.1 åŒæ­¥èˆ‡ç•°æ­¥ç·¨ç¨‹</h3>
            <p>åŒæ­¥ä»£ç¢¼æŒ‰é †åºåŸ·è¡Œï¼Œæ¯æ¢èªå¥å®Œæˆå¾Œæ‰åŸ·è¡Œä¸‹ä¸€æ¢ã€‚ç•°æ­¥ä»£ç¢¼å…è¨±å…¶ä»–ä»£ç¢¼åœ¨ç­‰å¾…æ“ä½œå®Œæˆæ™‚ç¹¼çºŒåŸ·è¡Œã€‚</p>
            
            <div class="example">
                <p><strong>åŒæ­¥ä»£ç¢¼å•é¡Œ</strong>ï¼šå¦‚æœæŸå€‹æ“ä½œè€—æ™‚è¼ƒé•·ï¼ˆå¦‚ç¶²çµ¡è«‹æ±‚ï¼‰ï¼Œå®ƒæœƒé˜»å¡æ‰€æœ‰å¾ŒçºŒä»£ç¢¼çš„åŸ·è¡Œï¼Œå°è‡´é é¢å‡çµã€‚</p>
                <p><strong>ç•°æ­¥ç·¨ç¨‹è§£æ±ºæ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨å›èª¿å‡½æ•¸ã€Promiseæˆ–async/awaitç­‰æŠ€è¡“è™•ç†è€—æ™‚æ“ä½œï¼Œä½¿ä»£ç¢¼ä¸æœƒè¢«é˜»å¡ã€‚</p>
            </div>
            
            <h3>10.2 å›èª¿å‡½æ•¸</h3>
            <p>å›èª¿å‡½æ•¸æ˜¯å‚³éçµ¦å¦ä¸€å€‹å‡½æ•¸çš„å‡½æ•¸ï¼Œå®ƒå°‡åœ¨ç‰¹å®šäº‹ä»¶ç™¼ç”Ÿæˆ–ä»»å‹™å®Œæˆæ™‚åŸ·è¡Œã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-callbacks" readonly>// åŸºæœ¬å›èª¿ç¤ºä¾‹
function greeting(name, callback) {
    console.log('ä½ å¥½ï¼Œ' + name);
    callback();
}

greeting('å°æ˜', function() {
    console.log('å›èª¿å‡½æ•¸åŸ·è¡Œå®Œç•¢');
});

// ç•°æ­¥æ“ä½œçš„å›èª¿ç¤ºä¾‹
setTimeout(function() {
    console.log('3ç§’å¾ŒåŸ·è¡Œ');
}, 3000);

// å›èª¿åœ°ç„ï¼ˆCallback Hellï¼‰
setTimeout(function() {
    console.log('ç¬¬ä¸€æ­¥');
    setTimeout(function() {
        console.log('ç¬¬äºŒæ­¥');
        setTimeout(function() {
            console.log('ç¬¬ä¸‰æ­¥');
            // æ›´å¤šåµŒå¥—...
        }, 1000);
    }, 1000);
}, 1000);</textarea>
                <button class="copy-button" onclick="copyCode('code-callbacks')">è¤‡è£½</button>
            </div>
            
            <h3>10.3 Promise</h3>
            <p>Promiseæ˜¯ç¾ä»£JavaScriptä¸­è™•ç†ç•°æ­¥æ“ä½œçš„æ¨™æº–æ–¹å¼ï¼Œå®ƒè¡¨ç¤ºä¸€å€‹å°šæœªå®Œæˆä½†é è¨ˆåœ¨æœªä¾†å®Œæˆçš„æ“ä½œã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-promises" readonly>// å‰µå»ºPromise
let promise = new Promise(function(resolve, reject) {
    // ç•°æ­¥æ“ä½œ
    let success = true;
    
    if (success) {
        resolve('æ“ä½œæˆåŠŸ');  // æˆåŠŸæ™‚èª¿ç”¨
    } else {
        reject('æ“ä½œå¤±æ•—');   // å¤±æ•—æ™‚èª¿ç”¨
    }
});

// ä½¿ç”¨Promise
promise
    .then(function(result) {
        console.log(result);  // è™•ç†æˆåŠŸçš„çµæœ
        return 'æ–°çµæœ';      // è¿”å›å€¼å°‡è¢«å‚³éåˆ°ä¸‹ä¸€å€‹then
    })
    .then(function(newResult) {
        console.log(newResult);  // è™•ç†æ–°çµæœ
    })
    .catch(function(error) {
        console.error(error);  // è™•ç†ä»»ä½•éŒ¯èª¤
    })
    .finally(function() {
        console.log('ç„¡è«–æˆåŠŸæˆ–å¤±æ•—éƒ½æœƒåŸ·è¡Œ');
    });

// Promiseéˆï¼Œè§£æ±ºå›èª¿åœ°ç„å•é¡Œ
function step1() {
    return new Promise((resolve) => {
        setTimeout(() => {
            console.log('ç¬¬ä¸€æ­¥');
            resolve('ç¬¬ä¸€æ­¥å®Œæˆ');
        }, 1000);
    });
}

function step2(message) {
    return new Promise((resolve) => {
        setTimeout(() => {
            console.log(message);
            console.log('ç¬¬äºŒæ­¥');
            resolve('ç¬¬äºŒæ­¥å®Œæˆ');
        }, 1000);
    });
}

function step3(message) {
    return new Promise((resolve) => {
        setTimeout(() => {
            console.log(message);
            console.log('ç¬¬ä¸‰æ­¥');
            resolve('å…¨éƒ¨å®Œæˆ');
        }, 1000);
    });
}

step1()
    .then(step2)
    .then(step3)
    .then((result) => {
        console.log(result);
    });</textarea>
                <button class="copy-button" onclick="copyCode('code-promises')">è¤‡è£½</button>
            </div>
            
            <h3>10.4 async/await</h3>
            <p>async/awaitæ˜¯åŸºæ–¼Promiseæ§‹å»ºçš„èªæ³•ç³–ï¼Œä½¿ç•°æ­¥ä»£ç¢¼çœ‹èµ·ä¾†æ›´åƒåŒæ­¥ä»£ç¢¼ï¼Œæ›´æ˜“è®€å’Œç¶­è­·ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-async-await" readonly>// ç•°æ­¥å‡½æ•¸
async function fetchData() {
    return 'æ•¸æ“š';  // è‡ªå‹•åŒ…è£ç‚ºPromise
}

// ä½¿ç”¨awaitç­‰å¾…Promiseè§£æ
async function processData() {
    try {
        console.log('é–‹å§‹ç²å–æ•¸æ“š');
        let data = await fetchData();  // ç­‰å¾…Promiseè§£æ
        console.log('ç²å–çš„æ•¸æ“šï¼š', data);
        return 'è™•ç†å®Œæˆ';
    } catch (error) {
        console.error('ç™¼ç”ŸéŒ¯èª¤ï¼š', error);
    } finally {
        console.log('æ¸…ç†å·¥ä½œ');
    }
}

// èª¿ç”¨ç•°æ­¥å‡½æ•¸
processData().then(result => {
    console.log(result);
});

// ä½¿ç”¨async/awaité‡å¯«ä¸Šé¢çš„æ­¥é©Ÿç¤ºä¾‹
async function executeSteps() {
    try {
        const result1 = await step1();
        const result2 = await step2(result1);
        const result3 = await step3(result2);
        console.log(result3);
    } catch (error) {
        console.error('åŸ·è¡Œæ­¥é©Ÿæ™‚å‡ºéŒ¯ï¼š', error);
    }
}

executeSteps();</textarea>
                <button class="copy-button" onclick="copyCode('code-async-await')">è¤‡è£½</button>
            </div>
            
            <h3>10.5 å¯¦éš›æ‡‰ç”¨ï¼šæ•¸æ“šç²å–</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-fetch" readonly>// ä½¿ç”¨fetch APIç²å–æ•¸æ“š
function fetchUserData() {
    fetch('https://jsonplaceholder.typicode.com/users/1')
        .then(response => {
            if (!response.ok) {
                throw new Error('ç¶²çµ¡éŸ¿æ‡‰ä¸æ­£å¸¸');
            }
            return response.json();
        })
        .then(user => {
            console.log('ç”¨æˆ¶æ•¸æ“šï¼š', user);
        })
        .catch(error => {
            console.error('ç²å–æ•¸æ“šå‡ºéŒ¯ï¼š', error);
        });
}

// ä½¿ç”¨async/awaitå’Œfetch
async function fetchUserDataAsync() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
        
        if (!response.ok) {
            throw new Error('ç¶²çµ¡éŸ¿æ‡‰ä¸æ­£å¸¸');
        }
        
        const user = await response.json();
        console.log('ç”¨æˆ¶æ•¸æ“šï¼š', user);
        return user;
    } catch (error) {
        console.error('ç²å–æ•¸æ“šå‡ºéŒ¯ï¼š', error);
    }
}

// ä¸¦è¡Œè«‹æ±‚å¤šå€‹è³‡æº
async function fetchMultipleResources() {
    try {
        const [usersResponse, postsResponse] = await Promise.all([
            fetch('https://jsonplaceholder.typicode.com/users'),
            fetch('https://jsonplaceholder.typicode.com/posts')
        ]);
        
        const users = await usersResponse.json();
        const posts = await postsResponse.json();
        
        console.log('ç”¨æˆ¶ï¼š', users.length);
        console.log('æ–‡ç« ï¼š', posts.length);
    } catch (error) {
        console.error('ç²å–è³‡æºæ™‚å‡ºéŒ¯ï¼š', error);
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-fetch')">è¤‡è£½</button>
            </div>
        </section>
        
        <section id="error-handling" class="section">
            <h2>11. éŒ¯èª¤è™•ç†</h2>
            <h3>11.1 JavaScriptéŒ¯èª¤é¡å‹</h3>
            <p>JavaScriptæœ‰å¹¾ç¨®å…§ç½®çš„éŒ¯èª¤é¡å‹ï¼š</p>
            
            <table>
                <tr>
                    <th>éŒ¯èª¤é¡å‹</th>
                    <th>æè¿°</th>
                    <th>ç¤ºä¾‹</th>
                </tr>
                <tr>
                    <td>SyntaxError</td>
                    <td>èªæ³•éŒ¯èª¤</td>
                    <td>if (x ===</td>
                </tr>
                <tr>
                    <td>ReferenceError</td>
                    <td>å¼•ç”¨æœªè²æ˜çš„è®Šæ•¸</td>
                    <td>console.log(undefinedVar)</td>
                </tr>
                <tr>
                    <td>TypeError</td>
                    <td>å€¼çš„é¡å‹èˆ‡é æœŸä¸ç¬¦</td>
                    <td>"hello".push()</td>
                </tr>
                <tr>
                    <td>RangeError</td>
                    <td>æ•¸å€¼è¶…å‡ºç¯„åœ</td>
                    <td>new Array(-1)</td>
                </tr>
                <tr>
                    <td>URIError</td>
                    <td>URIè™•ç†å‡½æ•¸ä½¿ç”¨ä¸ç•¶</td>
                    <td>decodeURI('%')</td>
                </tr>
                <tr>
                    <td>EvalError</td>
                    <td>eval()ä½¿ç”¨ä¸ç•¶</td>
                    <td>ç¾ä»£JavaScriptå¾ˆå°‘è¦‹</td>
                </tr>
            </table>
            
            <h3>11.2 try...catch...finally</h3>
            <p>try...catchèªå¥ç”¨æ–¼è™•ç†å¯èƒ½ç™¼ç”Ÿçš„éŒ¯èª¤ï¼Œé¿å…ç¨‹åºå´©æ½°ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-try-catch" readonly>// åŸºæœ¬try...catch
try {
    // å¯èƒ½å‡ºéŒ¯çš„ä»£ç¢¼
    console.log(nonExistentVariable);
} catch (error) {
    // è™•ç†éŒ¯èª¤
    console.error('ç™¼ç”ŸéŒ¯èª¤:', error.message);
}

// try...catch...finally
try {
    let result = 10 / 0;  // ä¸æœƒæ‹‹å‡ºéŒ¯èª¤ï¼Œä½†æœƒå¾—åˆ°Infinity
    console.log(result);
    let array = null;
    console.log(array.length);  // é€™æœƒæ‹‹å‡ºéŒ¯èª¤
} catch (error) {
    console.error('ç™¼ç”ŸéŒ¯èª¤:', error.message);
} finally {
    // ç„¡è«–æ˜¯å¦æœ‰éŒ¯èª¤éƒ½æœƒåŸ·è¡Œ
    console.log('finallyå¡Šç¸½æ˜¯åŸ·è¡Œ');
}

// ç²å–éŒ¯èª¤ä¿¡æ¯
try {
    throw new Error('è‡ªå®šç¾©éŒ¯èª¤');
} catch (error) {
    console.error(error.name);     // "Error"
    console.error(error.message);  // "è‡ªå®šç¾©éŒ¯èª¤"
    console.error(error.stack);    // å †ç–Šè¿½è¹¤ä¿¡æ¯
}</textarea>
                <button class="copy-button" onclick="copyCode('code-try-catch')">è¤‡è£½</button>
            </div>
            
            <h3>11.3 æ‹‹å‡ºè‡ªå®šç¾©éŒ¯èª¤</h3>
            <p>å¯ä»¥ä½¿ç”¨throwèªå¥æ‹‹å‡ºè‡ªå®šç¾©éŒ¯èª¤ï¼Œæ§åˆ¶ç¨‹åºæµç¨‹ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-throw" readonly>// æ‹‹å‡ºä¸åŒé¡å‹çš„éŒ¯èª¤
throw 'Error occurred';    // å­—ç¬¦ä¸²
throw 42;                  // æ•¸å­—
throw true;                // å¸ƒçˆ¾å€¼
throw new Error('éŒ¯èª¤ä¿¡æ¯');  // Errorå°è±¡ï¼ˆæ¨è–¦ï¼‰

// æ‹‹å‡ºç‰¹å®šé¡å‹çš„éŒ¯èª¤
throw new SyntaxError('èªæ³•éŒ¯èª¤');
throw new ReferenceError('å¼•ç”¨éŒ¯èª¤');
throw new TypeError('é¡å‹éŒ¯èª¤');
throw new RangeError('ç¯„åœéŒ¯èª¤');

// å‰µå»ºè‡ªå®šç¾©éŒ¯èª¤é¡å‹
class ValidationError extends Error {
    constructor(message) {
        super(message);
        this.name = 'ValidationError';
        this.code = 'INVALID_INPUT';
    }
}

// ä½¿ç”¨è‡ªå®šç¾©éŒ¯èª¤
function validateUser(user) {
    if (!user.name) {
        throw new ValidationError('ç”¨æˆ¶åä¸èƒ½ç‚ºç©º');
    }
    if (user.age < 0) {
        throw new ValidationError('å¹´é½¡ä¸èƒ½ç‚ºè² æ•¸');
    }
}

try {
    validateUser({ name: '', age: 30 });
} catch (error) {
    if (error instanceof ValidationError) {
        console.error('é©—è­‰éŒ¯èª¤ï¼š', error.message);
    } else {
        console.error('å…¶ä»–éŒ¯èª¤ï¼š', error);
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-throw')">è¤‡è£½</button>
            </div>
            
            <h3>11.4 éŒ¯èª¤è™•ç†ç­–ç•¥</h3>
            
            <div class="example">
                <p>æœ‰æ•ˆçš„éŒ¯èª¤è™•ç†ç­–ç•¥ï¼š</p>
                <ol>
                    <li><strong>é é˜²éŒ¯èª¤</strong>ï¼šåœ¨éŒ¯èª¤ç™¼ç”Ÿå‰é€²è¡Œæ•¸æ“šé©—è­‰</li>
                    <li><strong>å„ªé›…å¤±æ•—</strong>ï¼šç•¶éŒ¯èª¤ç™¼ç”Ÿæ™‚æä¾›å‚™ç”¨é¸é …</li>
                    <li><strong>æ˜ç¢ºå ±å‘Š</strong>ï¼šæä¾›æ¸…æ™°çš„éŒ¯èª¤ä¿¡æ¯</li>
                </ol>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-error-strategies" readonly>// é é˜²éŒ¯èª¤ï¼šæ•¸æ“šé©—è­‰
function divide(a, b) {
    // æª¢æŸ¥åƒæ•¸é¡å‹
    if (typeof a !== 'number' || typeof b !== 'number') {
        throw new TypeError('åƒæ•¸å¿…é ˆæ˜¯æ•¸å­—');
    }
    
    // é˜²æ­¢é™¤ä»¥é›¶
    if (b === 0) {
        throw new Error('é™¤æ•¸ä¸èƒ½ç‚ºé›¶');
    }
    
    return a / b;
}

// å„ªé›…å¤±æ•—ï¼šæä¾›å‚™ç”¨é¸é …
function fetchUserData(userId) {
    try {
        // å˜—è©¦å¾ä¼ºæœå™¨ç²å–æ•¸æ“š
        const userData = getUserFromServer(userId);
        return userData;
    } catch (error) {
        console.error('ç„¡æ³•å¾ä¼ºæœå™¨ç²å–ç”¨æˆ¶æ•¸æ“š:', error);
        // ä½¿ç”¨æœ¬åœ°ç·©å­˜ä½œç‚ºå‚™ç”¨
        return getUserFromCache(userId) || { name: 'Guest', id: 0 };
    }
}

// æ˜ç¢ºå ±å‘Šï¼šè¨˜éŒ„è©³ç´°éŒ¯èª¤ä¿¡æ¯
function processOrder(order) {
    try {
        validateOrder(order);
        submitOrder(order);
        return { success: true };
    } catch (error) {
        // è¨˜éŒ„è©³ç´°éŒ¯èª¤ä¿¡æ¯
        logError({
            context: 'Order Processing',
            orderId: order.id,
            error: error.message,
            stack: error.stack,
            timestamp: new Date()
        });
        
        // å‘ç”¨æˆ¶è¿”å›å‹å¥½çš„éŒ¯èª¤ä¿¡æ¯
        return { 
            success: false, 
            message: 'è™•ç†è¨‚å–®æ™‚å‡ºéŒ¯ï¼Œè«‹ç¨å¾Œå†è©¦' 
        };
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-error-strategies')">è¤‡è£½</button>
            </div>
            
            <h3>11.5 ç•°æ­¥ä»£ç¢¼çš„éŒ¯èª¤è™•ç†</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-async-errors" readonly>// PromiseéŒ¯èª¤è™•ç†
fetch('https://api.example.com/data')
    .then(response => {
        if (!response.ok) {
            throw new Error('HTTPéŒ¯èª¤ï¼š' + response.status);
        }
        return response.json();
    })
    .then(data => {
        console.log('æˆåŠŸç²å–æ•¸æ“š:', data);
    })
    .catch(error => {
        console.error('ç²å–æ•¸æ“šå¤±æ•—:', error);
    });

// async/awaitéŒ¯èª¤è™•ç†
async function fetchData() {
    try {
        const response = await fetch('https://api.example.com/data');
        
        if (!response.ok) {
            throw new Error('HTTPéŒ¯èª¤ï¼š' + response.status);
        }
        
        const data = await response.json();
        console.log('æˆåŠŸç²å–æ•¸æ“š:', data);
        return data;
    } catch (error) {
        console.error('ç²å–æ•¸æ“šå¤±æ•—:', error);
        // å¯ä»¥é‡è©¦ã€å›é€€åˆ°ç·©å­˜æˆ–é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
        throw error; // å¯ä»¥é¸æ“‡é‡æ–°æ‹‹å‡ºéŒ¯èª¤
    }
}

// å…¨å±€éŒ¯èª¤è™•ç†
window.addEventListener('error', function(event) {
    console.error('å…¨å±€éŒ¯èª¤:', event.message);
    // å¯ä»¥å°‡éŒ¯èª¤ä¸Šå ±åˆ°ä¼ºæœå™¨
    // sendErrorToServer(event.error);
    
    // é˜²æ­¢é»˜èªè™•ç†ï¼ˆé€šå¸¸ä¸æ¨è–¦ï¼Œåƒ…ç”¨æ–¼ç‰¹å®šæƒ…æ³ï¼‰
    // event.preventDefault();
});

// è™•ç†æœªæ•ç²çš„Promiseæ‹’çµ•
window.addEventListener('unhandledrejection', function(event) {
    console.error('æœªè™•ç†çš„Promiseæ‹’çµ•:', event.reason);
    // å¯ä»¥å°‡éŒ¯èª¤ä¸Šå ±åˆ°ä¼ºæœå™¨
    // sendErrorToServer(event.reason);
});</textarea>
                <button class="copy-button" onclick="copyCode('code-async-errors')">è¤‡è£½</button>
            </div>
        </section>

        <section id="es6plus" class="section">
            <h2>12. ES6+ç‰¹æ€§</h2>
            <h3>12.1 è®Šæ•¸è²æ˜ï¼šletèˆ‡const</h3>
            <p>ES6å¼•å…¥äº†æ–°çš„è®Šæ•¸è²æ˜æ–¹å¼ï¼šletå’Œconstï¼Œè§£æ±ºäº†varçš„ä¸€äº›å•é¡Œã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-let-const" readonly>// varçš„å•é¡Œ
var x = 10;
var x = 20;  // å¯ä»¥é‡è¤‡è²æ˜
console.log(x);  // 20

// ä½œç”¨åŸŸå•é¡Œ
for (var i = 0; i < 3; i++) {
    // iåœ¨å¾ªç’°å¤–ä»ç„¶å¯è¨ªå•
}
console.log(i);  // 3

// let - å¡Šç´šä½œç”¨åŸŸè®Šæ•¸
let y = 10;
// let y = 20;  // éŒ¯èª¤ï¼šä¸èƒ½é‡è¤‡è²æ˜

for (let j = 0; j < 3; j++) {
    // jåªåœ¨å¾ªç’°å…§å¯è¨ªå•
}
// console.log(j);  // éŒ¯èª¤ï¼šjæœªå®šç¾©

// const - å¸¸é‡ï¼ˆä¸èƒ½é‡æ–°è³¦å€¼ï¼‰
const PI = 3.14159;
// PI = 3.14;  // éŒ¯èª¤ï¼šä¸èƒ½é‡æ–°è³¦å€¼

// constèˆ‡ç‰©ä»¶
const user = { name: 'å°æ˜' };
user.name = 'å°è¯';  // å¯ä»¥ä¿®æ”¹å±¬æ€§
// user = { name: 'å°æ' };  // éŒ¯èª¤ï¼šä¸èƒ½é‡æ–°è³¦å€¼

// å‡çµç‰©ä»¶ä»¥ä½¿å…¶å®Œå…¨ä¸å¯è®Š
const frozenUser = Object.freeze({ name: 'å°æ˜' });
frozenUser.name = 'å°è¯';  // åœ¨åš´æ ¼æ¨¡å¼ä¸‹æœƒæ‹‹å‡ºéŒ¯èª¤ï¼Œå¦å‰‡éœé»˜å¤±æ•—
console.log(frozenUser.name);  // ä»ç„¶æ˜¯ 'å°æ˜'</textarea>
                <button class="copy-button" onclick="copyCode('code-let-const')">è¤‡è£½</button>
            </div>
            
            <h3>12.2 ç®­é ­å‡½æ•¸</h3>
            <p>ç®­é ­å‡½æ•¸æä¾›äº†æ›´ç°¡æ½”çš„èªæ³•ä¾†è²æ˜å‡½æ•¸ï¼Œä¸¦ä¸”ä¸ç¶å®šè‡ªå·±çš„thisã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-arrow-functions" readonly>// å‚³çµ±å‡½æ•¸è¡¨é”å¼
const add = function(a, b) {
    return a + b;
};

// ç®­é ­å‡½æ•¸
const addArrow = (a, b) => a + b;

// å–®å€‹åƒæ•¸å¯ä»¥çœç•¥æ‹¬è™Ÿ
const square = x => x * x;

// ç„¡åƒæ•¸éœ€è¦ç©ºæ‹¬è™Ÿ
const getRandomNumber = () => Math.random();

// å¤šè¡Œéœ€è¦å¤§æ‹¬è™Ÿå’Œreturn
const calculateArea = (width, height) => {
    const area = width * height;
    return area;
};

// thisç¶å®šçš„å€åˆ¥
const traditional = {
    name: 'å‚³çµ±å‡½æ•¸',
    sayLater: function() {
        setTimeout(function() {
            console.log(this.name);  // undefinedï¼Œå› ç‚ºthisæŒ‡å‘window
        }, 1000);
    }
};

const arrow = {
    name: 'ç®­é ­å‡½æ•¸',
    sayLater: function() {
        setTimeout(() => {
            console.log(this.name);  // 'ç®­é ­å‡½æ•¸'ï¼Œå› ç‚ºç®­é ­å‡½æ•¸ä¸ç¶å®šè‡ªå·±çš„this
        }, 1000);
    }
};</textarea>
                <button class="copy-button" onclick="copyCode('code-arrow-functions')">è¤‡è£½</button>
            </div>
            
            <h3>12.3 æ¨¡æ¿å­—ç¬¦ä¸²</h3>
            <p>æ¨¡æ¿å­—ç¬¦ä¸²æä¾›äº†æ›´ç°¡æ½”çš„å­—ç¬¦ä¸²é€£æ¥æ–¹å¼å’Œå¤šè¡Œå­—ç¬¦ä¸²æ”¯æŒã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-template-strings" readonly>// å‚³çµ±å­—ç¬¦ä¸²é€£æ¥
const name = 'å°æ˜';
const greeting = 'ä½ å¥½ï¼Œ' + name + 'ï¼ä»Šå¤©æ˜¯' + new Date().toLocaleDateString();

// æ¨¡æ¿å­—ç¬¦ä¸²
const templateGreeting = `ä½ å¥½ï¼Œ${name}ï¼ä»Šå¤©æ˜¯${new Date().toLocaleDateString()}`;

// å¤šè¡Œå­—ç¬¦ä¸²
const multiline = `é€™æ˜¯ç¬¬ä¸€è¡Œ
é€™æ˜¯ç¬¬äºŒè¡Œ
é€™æ˜¯ç¬¬ä¸‰è¡Œ`;

// åµŒå¥—æ¨¡æ¿
const price = 99.99;
const tax = 0.07;
const total = `ç¸½åƒ¹: $${(price * (1 + tax)).toFixed(2)}`;

// å¸¶æ¨™ç±¤çš„æ¨¡æ¿å­—ç¬¦ä¸²
function highlight(strings, ...values) {
    let result = '';
    strings.forEach((string, i) => {
        result += string;
        if (i < values.length) {
            result += `<strong>${values[i]}</strong>`;
        }
    });
    return result;
}

const product = 'ç­†è¨˜æœ¬é›»è…¦';
const highlightedText = highlight`æˆ‘è²·äº†ä¸€å€‹æ–°çš„${product}ï¼Œåƒ¹æ ¼æ˜¯$${price}ï¼`;
console.log(highlightedText);  // "æˆ‘è²·äº†ä¸€å€‹æ–°çš„<strong>ç­†è¨˜æœ¬é›»è…¦</strong>ï¼Œåƒ¹æ ¼æ˜¯$<strong>99.99</strong>ï¼"</textarea>
                <button class="copy-button" onclick="copyCode('code-template-strings')">è¤‡è£½</button>
            </div>
            
            <h3>12.4 è§£æ§‹è³¦å€¼</h3>
            <p>è§£æ§‹è³¦å€¼å…è¨±å¾é™£åˆ—æˆ–ç‰©ä»¶ä¸­æå–æ•¸æ“šä¸¦è³¦å€¼çµ¦è®Šæ•¸ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-destructuring" readonly>// é™£åˆ—è§£æ§‹
const colors = ['ç´…', 'ç¶ ', 'è—'];

// å‚³çµ±æ–¹å¼
const red = colors[0];
const green = colors[1];
const blue = colors[2];

// è§£æ§‹è³¦å€¼
const [red2, green2, blue2] = colors;
console.log(red2, green2, blue2);  // ç´… ç¶  è—

// è·³éå…ƒç´ 
const [first, , third] = colors;
console.log(first, third);  // ç´… è—

// å‰©é¤˜å…ƒç´ 
const [primary, ...secondaryColors] = colors;
console.log(primary, secondaryColors);  // ç´… ['ç¶ ', 'è—']

// é è¨­å€¼
const [main = 'é»‘', accent = 'ç™½'] = ['é»ƒ'];
console.log(main, accent);  // é»ƒ ç™½

// ç‰©ä»¶è§£æ§‹
const person = {
    name: 'å°æ˜',
    age: 30,
    city: 'å°åŒ—',
    country: 'å°ç£'
};

// å‚³çµ±æ–¹å¼
const personName = person.name;
const personAge = person.age;

// è§£æ§‹è³¦å€¼
const { name, age } = person;
console.log(name, age);  // å°æ˜ 30

// ä½¿ç”¨ä¸åŒçš„è®Šæ•¸å
const { name: fullName, age: years } = person;
console.log(fullName, years);  // å°æ˜ 30

// é è¨­å€¼
const { hobby = 'é–±è®€' } = person;
console.log(hobby);  // é–±è®€

// åµŒå¥—è§£æ§‹
const student = {
    id: 1,
    info: {
        firstName: 'å°',
        lastName: 'æ˜',
        scores: [85, 90, 95]
    }
};

const { info: { firstName, lastName, scores: [math, english, science] } } = student;
console.log(firstName, lastName, math, english, science);  // å° æ˜ 85 90 95

// å‡½æ•¸åƒæ•¸è§£æ§‹
function printPersonInfo({ name, age, city = 'æœªçŸ¥' }) {
    console.log(`${name}, ${age}æ­², ä¾†è‡ª${city}`);
}

printPersonInfo(person);  // å°æ˜, 30æ­², ä¾†è‡ªå°åŒ—</textarea>
                <button class="copy-button" onclick="copyCode('code-destructuring')">è¤‡è£½</button>
            </div>
            
            <h3>12.5 å±•é–‹é‹ç®—ç¬¦èˆ‡å‰©é¤˜åƒæ•¸</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-spread-rest" readonly>// å±•é–‹é‹ç®—ç¬¦ (...)
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// åˆä½µé™£åˆ—
const combined = [...arr1, ...arr2];
console.log(combined);  // [1, 2, 3, 4, 5, 6]

// è¤‡è£½é™£åˆ—
const copy = [...arr1];
console.log(copy);  // [1, 2, 3]

// åœ¨é™£åˆ—ä¸­é–“æ’å…¥å…ƒç´ 
const inserted = [...arr1.slice(0, 1), 1.5, ...arr1.slice(1)];
console.log(inserted);  // [1, 1.5, 2, 3]

// å°‡å­—ç¬¦ä¸²åˆ†è§£ç‚ºå­—ç¬¦
const chars = [..."Hello"];
console.log(chars);  // ['H', 'e', 'l', 'l', 'o']

// å±•é–‹é‹ç®—ç¬¦ç”¨æ–¼ç‰©ä»¶ï¼ˆES2018+ï¼‰
const obj1 = { a: 1, b: 2 };
const obj2 = { c: 3, d: 4 };

// åˆä½µç‰©ä»¶
const mergedObj = { ...obj1, ...obj2 };
console.log(mergedObj);  // { a: 1, b: 2, c: 3, d: 4 }

// è¤‡è£½ä¸¦è¦†è“‹ç‰¹å®šå±¬æ€§
const modified = { ...obj1, b: 3 };
console.log(modified);  // { a: 1, b: 3 }

// å‰©é¤˜åƒæ•¸
function sum(...numbers) {
    return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3, 4, 5));  // 15

// çµåˆæ™®é€šåƒæ•¸å’Œå‰©é¤˜åƒæ•¸
function printInfo(title, ...details) {
    console.log(`${title}ï¼š`);
    details.forEach(detail => console.log(`- ${detail}`));
}

printInfo('æ°´æœ', 'è˜‹æœ', 'é¦™è•‰', 'æ©™å­');
// æ°´æœï¼š
// - è˜‹æœ
// - é¦™è•‰
// - æ©™å­</textarea>
                <button class="copy-button" onclick="copyCode('code-spread-rest')">è¤‡è£½</button>
            </div>
            
            <h3>12.6 é¡èˆ‡ç¹¼æ‰¿</h3>
            <p>ES6å¼•å…¥äº†é¡èªæ³•ï¼Œä½¿é¢å‘å°è±¡ç·¨ç¨‹æ›´åŠ ç›´è§€ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-classes-es6" readonly>// ES6é¡èªæ³•
class Person {
    // æ§‹é€ å‡½æ•¸
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
    
    // å¯¦ä¾‹æ–¹æ³•
    sayHello() {
        return `ä½ å¥½ï¼Œæˆ‘æ˜¯${this.name}ï¼Œ${this.age}æ­²`;
    }
    
    // ç²å–å™¨
    get info() {
        return `${this.name}, ${this.age}æ­²`;
    }
    
    // è¨­ç½®å™¨
    set info(value) {
        [this.name, this.ageStr] = value.split(',');
        this.age = parseInt(this.ageStr);
    }
    
    // éœæ…‹æ–¹æ³•
    static createAnonymous() {
        return new Person('åŒ¿å', 0);
    }
}

const person1 = new Person('å°æ˜', 30);
console.log(person1.sayHello());  // ä½ å¥½ï¼Œæˆ‘æ˜¯å°æ˜ï¼Œ30æ­²
console.log(person1.info);  // å°æ˜, 30æ­²

person1.info = 'å°è¯, 25';
console.log(person1.name, person1.age);  // å°è¯ 25

const anonymous = Person.createAnonymous();
console.log(anonymous.name);  // åŒ¿å

// ç¹¼æ‰¿
class Student extends Person {
    constructor(name, age, grade) {
        // å‘¼å«çˆ¶é¡æ§‹é€ å‡½æ•¸
        super(name, age);
        this.grade = grade;
    }
    
    // è¦†å¯«çˆ¶é¡æ–¹æ³•
    sayHello() {
        return `${super.sayHello()}ï¼Œæˆ‘æ˜¯${this.grade}å¹´ç´šå­¸ç”Ÿ`;
    }
    
    study() {
        return `${this.name}æ­£åœ¨å­¸ç¿’`;
    }
}

const student1 = new Student('å°è¯', 15, 'é«˜ä¸€');
console.log(student1.sayHello());  // ä½ å¥½ï¼Œæˆ‘æ˜¯å°è¯ï¼Œ15æ­²ï¼Œæˆ‘æ˜¯é«˜ä¸€å¹´ç´šå­¸ç”Ÿ
console.log(student1.study());  // å°è¯æ­£åœ¨å­¸ç¿’</textarea>
                <button class="copy-button" onclick="copyCode('code-classes-es6')">è¤‡è£½</button>
            </div>
            
            <h3>12.7 Promiseèˆ‡éåŒæ­¥è™•ç†</h3>
            <p>Promiseæ˜¯ES6å¼•å…¥çš„éåŒæ­¥è™•ç†çš„æ¨™æº–æ–¹å¼ï¼Œå·²åœ¨å‰é¢çš„ç« ç¯€è©³ç´°ä»‹ç´¹ã€‚</p>
            
            <h3>12.8 æ¨¡çµ„ç³»çµ±</h3>
            <p>ES6å¼•å…¥äº†æ¨™æº–åŒ–çš„æ¨¡çµ„ç³»çµ±ï¼Œç”¨æ–¼ä»£ç¢¼çµ„ç¹”å’Œé‡ç”¨ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-modules" readonly>// math.js
export const PI = 3.14159;

export function add(a, b) {
    return a + b;
}

export function multiply(a, b) {
    return a * b;
}

export default class Calculator {
    add(a, b) {
        return a + b;
    }
    
    subtract(a, b) {
        return a - b;
    }
}

// åœ¨å¦ä¸€å€‹æ–‡ä»¶ä¸­å°å…¥
// main.js
import Calculator, { PI, add, multiply } from './math.js';

console.log(PI);  // 3.14159
console.log(add(2, 3));  // 5

const calc = new Calculator();
console.log(calc.subtract(10, 5));  // 5

// å°å…¥æ‰€æœ‰å°å‡ºé …ç‚ºä¸€å€‹ç‰©ä»¶
import * as MathUtils from './math.js';

console.log(MathUtils.PI);  // 3.14159
console.log(MathUtils.add(4, 5));  // 9

// å‹•æ…‹å°å…¥ï¼ˆES2020ï¼‰
async function loadModule() {
    const math = await import('./math.js');
    console.log(math.PI);
    return math;
}</textarea>
                <button class="copy-button" onclick="copyCode('code-modules')">è¤‡è£½</button>
            </div>
            
            <h3>12.9 å…¶ä»–ES6+ç‰¹æ€§</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-other-es6" readonly>// Symbol - å”¯ä¸€æ¨™è­˜ç¬¦
const id = Symbol('id');
const user = {
    name: 'å°æ˜',
    [id]: 12345
};
console.log(user[id]);  // 12345

// Map - éµå€¼å°é›†åˆ
const userMap = new Map();
userMap.set('name', 'å°æ˜');
userMap.set('age', 30);
userMap.set(id, 12345);  // å¯ä»¥ä½¿ç”¨ä»»ä½•é¡å‹ä½œç‚ºéµ

console.log(userMap.get('name'));  // å°æ˜
console.log(userMap.has('age'));   // true
console.log(userMap.size);         // 3

// Set - å”¯ä¸€å€¼çš„é›†åˆ
const uniqueNumbers = new Set([1, 2, 3, 3, 4, 4, 5]);
console.log([...uniqueNumbers]);  // [1, 2, 3, 4, 5]

uniqueNumbers.add(6);
console.log(uniqueNumbers.has(3));  // true
console.log(uniqueNumbers.size);    // 6

// è¿­ä»£å™¨å’Œç”Ÿæˆå™¨
function* idGenerator() {
    let id = 1;
    while (true) {
        yield id++;
    }
}

const ids = idGenerator();
console.log(ids.next().value);  // 1
console.log(ids.next().value);  // 2

// å¯é¸éˆæ“ä½œç¬¦ ?. (ES2020)
const user2 = { 
    name: 'å°æ˜',
    address: { 
        city: 'å°åŒ—' 
    } 
};

// å‚³çµ±æ–¹å¼ï¼Œéœ€è¦æª¢æŸ¥æ¯ä¸€ç´š
const city = user2 && user2.address && user2.address.city;

// ä½¿ç”¨å¯é¸éˆ
const city2 = user2?.address?.city;
console.log(city2);  // å°åŒ—

// ç©ºå€¼åˆä½µé‹ç®—ç¬¦ ?? (ES2020)
const value = null;
const defaultValue = value ?? 'default';
console.log(defaultValue);  // 'default'

// é‚è¼¯è³¦å€¼é‹ç®—ç¬¦ (ES2021)
let x = null;
x ??= 10;  // ç­‰åŒæ–¼ x = x ?? 10
console.log(x);  // 10

let y = 5;
y ??= 10;
console.log(y);  // ä»ç„¶æ˜¯5ï¼Œå› ç‚ºyä¸æ˜¯nullæˆ–undefined</textarea>
                <button class="copy-button" onclick="copyCode('code-other-es6')">è¤‡è£½</button>
            </div>
        </section>
        
        <section id="modules" class="section">
            <h2>13. æ¨¡çµ„ç³»çµ±</h2>
            <h3>13.1 JavaScriptæ¨¡çµ„æ¼”é€²</h3>
            <p>JavaScriptæ¨¡çµ„ç³»çµ±ç¶“æ­·äº†å¤šç¨®å½¢å¼çš„æ¼”è®Šï¼š</p>
            
            <ol>
                <li><strong>å…¨å±€è®Šæ•¸èˆ‡å‘½åç©ºé–“</strong>ï¼šæ—©æœŸçš„æ–¹å¼ï¼Œå®¹æ˜“é€ æˆåç¨±è¡çª</li>
                <li><strong>CommonJS</strong>ï¼šNode.jsä½¿ç”¨çš„æ¨¡çµ„ç³»çµ±</li>
                <li><strong>AMD (Asynchronous Module Definition)</strong>ï¼šç”¨æ–¼ç€è¦½å™¨çš„ç•°æ­¥æ¨¡çµ„åŠ è¼‰</li>
                <li><strong>UMD (Universal Module Definition)</strong>ï¼šå…¼å®¹CommonJSå’ŒAMD</li>
                <li><strong>ES Modules</strong>ï¼šJavaScriptå®˜æ–¹æ¨™æº–æ¨¡çµ„ç³»çµ±</li>
            </ol>
            
            <h3>13.2 ESæ¨¡çµ„åŸºç¤</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-es-modules" readonly>// åœ¨HTMLä¸­ä½¿ç”¨æ¨¡çµ„
// <script type="module" src="main.js"></script>

// åŸºæœ¬å°å‡ºå’Œå°å…¥
// math.js
export function add(a, b) {
    return a + b;
}

export const PI = 3.14159;

// main.js
import { add, PI } from './math.js';
console.log(add(2, 3));  // 5
console.log(PI);  // 3.14159

// é»˜èªå°å‡ºå’Œå°å…¥
// utils.js
export default function formatDate(date) {
    return date.toLocaleDateString();
}

// main.js
import formatDate from './utils.js';
console.log(formatDate(new Date()));  // æ ¼å¼åŒ–çš„æ—¥æœŸ

// æ··åˆé»˜èªå°å‡ºå’Œå‘½åå°å‡º
// api.js
export default class API {
    // APIé¡
}

export function get(url) {
    // ç²å–æ•¸æ“š
}

export function post(url, data) {
    // ç™¼é€æ•¸æ“š
}

// main.js
import API, { get, post } from './api.js';
const api = new API();
get('/users');

// é‡å‘½åå°å…¥
import { add as sum, PI as MATH_PI } from './math.js';
console.log(sum(5, 10));  // 15

// å°å…¥æ‰€æœ‰å°å‡ºç‚ºä¸€å€‹å°è±¡
import * as MathUtils from './math.js';
console.log(MathUtils.add(1, 2));  // 3
console.log(MathUtils.PI);  // 3.14159</textarea>
                <button class="copy-button" onclick="copyCode('code-es-modules')">è¤‡è£½</button>
            </div>
            
            <h3>13.3 æ¨¡çµ„ç‰¹æ€§</h3>
            <p>ESæ¨¡çµ„å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
            
            <ul>
                <li>æ¨¡çµ„è‡ªå‹•é‹è¡Œåœ¨åš´æ ¼æ¨¡å¼ä¸­ï¼ˆ'use strict'ï¼‰</li>
                <li>æ¨¡çµ„æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œä¸æœƒæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li>
                <li>æ¨¡çµ„åªåŸ·è¡Œä¸€æ¬¡ï¼Œå³ä½¿è¢«å¤šæ¬¡å°å…¥</li>
                <li>æ¨¡çµ„æ”¯æŒé ‚å±¤awaitï¼ˆES2022ï¼‰</li>
                <li>å°å…¥æ˜¯éœæ…‹çš„ï¼Œå¿…é ˆä½æ–¼æ¨¡çµ„é ‚å±¤</li>
            </ul>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-module-features" readonly>// æ¨¡çµ„å…·æœ‰è‡ªå·±çš„ä½œç”¨åŸŸ
// module1.js
const privateVar = 'This is private';
export const publicVar = 'This is public';

// module2.js
import { publicVar } from './module1.js';
console.log(publicVar);  // 'This is public'
// console.log(privateVar);  // Error: privateVar is not defined

// é ‚å±¤awaitï¼ˆES2022ï¼‰
// data-service.js
export async function fetchData() {
    const response = await fetch('https://api.example.com/data');
    return response.json();
}

// å¯ä»¥åœ¨æ¨¡çµ„é ‚å±¤ä½¿ç”¨await
// app.js
const data = await fetchData();
console.log(data);

// å‹•æ…‹å°å…¥
// å…è¨±æ ¹æ“šæ¢ä»¶æˆ–åœ¨éœ€è¦æ™‚åŠ è¼‰æ¨¡çµ„
async function loadModule() {
    if (condition) {
        const { feature } = await import('./feature.js');
        feature();
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-module-features')">è¤‡è£½</button>
            </div>
            
            <h3>13.4 æ¨¡çµ„æœ€ä½³å¯¦è¸</h3>
            
            <div class="example">
                <p>ä½¿ç”¨æ¨¡çµ„çš„æœ€ä½³å¯¦è¸ï¼š</p>
                <ol>
                    <li>æ¯å€‹æ–‡ä»¶ä¸€å€‹æ¨¡çµ„ï¼Œéµå¾ªå–®ä¸€è·è²¬åŸå‰‡</li>
                    <li>ä½¿ç”¨æ˜ç¢ºçš„å°å…¥å’Œå°å‡ºèªå¥</li>
                    <li>é¿å…å‰¯ä½œç”¨ï¼Œä¿æŒæ¨¡çµ„ç´”æ·¨</li>
                    <li>ä½¿ç”¨é©ç•¶çš„æ–‡ä»¶æ“´å±•åï¼ˆ.jsã€.mjsï¼‰</li>
                    <li>å‰µå»ºç´¢å¼•æ–‡ä»¶ï¼ˆbarrel filesï¼‰ä»¥ç°¡åŒ–å°å…¥</li>
                </ol>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-module-practices" readonly>// ç´¢å¼•æ–‡ä»¶ç¤ºä¾‹
// åœ¨utils/index.jsä¸­é›†ä¸­å°å‡º
export { default as formatDate } from './formatDate.js';
export { default as formatCurrency } from './formatCurrency.js';
export { default as validateEmail } from './validateEmail.js';

// åœ¨æ‡‰ç”¨ä¸­ç°¡åŒ–å°å…¥
import { formatDate, formatCurrency, validateEmail } from './utils';

// çµ„ç¹”å¤§å‹æ‡‰ç”¨çš„æ¨¡çµ„
// src/
//   /components/
//     /Button/
//       index.js
//       Button.js
//       Button.css
//     /Modal/
//       index.js
//       Modal.js
//       Modal.css
//   /services/
//     api.js
//     auth.js
//   /utils/
//     index.js
//     format.js
//     validation.js
//   /pages/
//     Home.js
//     About.js
//   index.js  // æ‡‰ç”¨å…¥å£</textarea>
                <button class="copy-button" onclick="copyCode('code-module-practices')">è¤‡è£½</button>
            </div>
        </section>

        <section id="storage" class="section">
            <h2>14. å­˜å„²</h2>
            <h3>14.1 Cookie</h3>
            <p>Cookieæ˜¯å­˜å„²åœ¨ç”¨æˆ¶ç€è¦½å™¨ä¸­çš„å°å‹æ–‡æœ¬æ•¸æ“šï¼Œæœƒåœ¨æ¯æ¬¡HTTPè«‹æ±‚ä¸­ç™¼é€åˆ°æœå‹™å™¨ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-cookies" readonly>// è¨­ç½®cookie
document.cookie = "username=å°æ˜";

// è¨­ç½®å¸¶éæœŸæ™‚é–“çš„cookieï¼ˆ10åˆ†é˜å¾ŒéæœŸï¼‰
let expiryDate = new Date();
expiryDate.setTime(expiryDate.getTime() + (10 * 60 * 1000));
document.cookie = `username=å°æ˜; expires=${expiryDate.toUTCString()}`;

// è¨­ç½®å¸¶è·¯å¾‘çš„cookie
document.cookie = "username=å°æ˜; path=/";

// è¨­ç½®å®‰å…¨cookieï¼ˆåªé€šéHTTPSç™¼é€ï¼‰
document.cookie = "username=å°æ˜; secure";

// è¨­ç½®HttpOnly cookieï¼ˆJavaScriptç„¡æ³•è¨ªå•ï¼‰
// åªèƒ½ç”±æœå‹™å™¨è¨­ç½®

// è®€å–æ‰€æœ‰cookie
console.log(document.cookie);  // è¿”å›æ‰€æœ‰éHttpOnly cookieçš„å­—ç¬¦ä¸²

// è§£æcookie
function getCookie(name) {
    const cookieArr = document.cookie.split(';');
    
    for (let i = 0; i < cookieArr.length; i++) {
        const cookiePair = cookieArr[i].split('=');
        const cookieName = cookiePair[0].trim();
        
        if (cookieName === name) {
            return decodeURIComponent(cookiePair[1]);
        }
    }
    
    return null;
}

// åˆªé™¤cookieï¼ˆé€šéè¨­ç½®éæœŸæ™‚é–“ç‚ºéå»ï¼‰
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";</textarea>
                <button class="copy-button" onclick="copyCode('code-cookies')">è¤‡è£½</button>
            </div>
            
            <h3>14.2 Web Storage (localStorageèˆ‡sessionStorage)</h3>
            <p>Web Storage APIæä¾›äº†å…©ç¨®æ©Ÿåˆ¶ä¾†å­˜å„²å®¢æˆ¶ç«¯æ•¸æ“šï¼šlocalStorageå’ŒsessionStorageã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-web-storage" readonly>// localStorage - æ°¸ä¹…å­˜å„²ï¼Œé™¤éæ‰‹å‹•æ¸…é™¤
// è¨­ç½®æ•¸æ“š
localStorage.setItem('username', 'å°æ˜');
localStorage.setItem('preferences', JSON.stringify({
    theme: 'dark',
    fontSize: 'large'
}));

// ç²å–æ•¸æ“š
const username = localStorage.getItem('username');
const preferences = JSON.parse(localStorage.getItem('preferences'));

console.log(username);  // å°æ˜
console.log(preferences.theme);  // dark

// åˆªé™¤ç‰¹å®šé …ç›®
localStorage.removeItem('username');

// æ¸…é™¤æ‰€æœ‰æ•¸æ“š
localStorage.clear();

// ç²å–å­˜å„²é …æ•¸
console.log(localStorage.length);

// éæ­·æ‰€æœ‰é …ç›®
for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    const value = localStorage.getItem(key);
    console.log(`${key}: ${value}`);
}

// sessionStorage - åƒ…åœ¨ç•¶å‰æœƒè©±æœŸé–“æœ‰æ•ˆ
// ç”¨æ³•èˆ‡localStorageç›¸åŒ
sessionStorage.setItem('tempData', 'æš«æ™‚æ•¸æ“š');
const tempData = sessionStorage.getItem('tempData');
sessionStorage.removeItem('tempData');
sessionStorage.clear();</textarea>
                <button class="copy-button" onclick="copyCode('code-web-storage')">è¤‡è£½</button>
            </div>
            
            <h3>14.3 IndexedDB</h3>
            <p>IndexedDBæ˜¯ä¸€å€‹ä½ç´šAPIï¼Œç”¨æ–¼å®¢æˆ¶ç«¯å­˜å„²å¤§é‡çµæ§‹åŒ–æ•¸æ“šï¼ŒåŒ…æ‹¬æ–‡ä»¶å’ŒäºŒé€²åˆ¶æ•¸æ“šã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-indexeddb" readonly>// æ‰“é–‹æ•¸æ“šåº«
const dbRequest = indexedDB.open('MyDatabase', 1);

// è™•ç†æ•¸æ“šåº«å‡ç´šï¼ˆé¦–æ¬¡å‰µå»ºæˆ–ç‰ˆæœ¬æ›´æ–°æ™‚ï¼‰
dbRequest.onupgradeneeded = function(event) {
    const db = event.target.result;
    
    // å‰µå»ºå°è±¡å€‰åº«ï¼ˆé¡ä¼¼è¡¨ï¼‰
    const usersStore = db.createObjectStore('users', { keyPath: 'id' });
    
    // å‰µå»ºç´¢å¼•
    usersStore.createIndex('name', 'name', { unique: false });
    usersStore.createIndex('email', 'email', { unique: true });
    
    console.log('æ•¸æ“šåº«è¨­ç½®å®Œæˆ');
};

// é€£æ¥æˆåŠŸ
dbRequest.onsuccess = function(event) {
    const db = event.target.result;
    console.log('æ•¸æ“šåº«é€£æ¥æˆåŠŸ');
    
    // æ·»åŠ æ•¸æ“š
    function addUser(user) {
        const transaction = db.transaction(['users'], 'readwrite');
        const usersStore = transaction.objectStore('users');
        const request = usersStore.add(user);
        
        request.onsuccess = function() {
            console.log('ç”¨æˆ¶æ·»åŠ æˆåŠŸ');
        };
        
        request.onerror = function() {
            console.error('æ·»åŠ ç”¨æˆ¶å‡ºéŒ¯');
        };
    }
    
    // ç²å–æ•¸æ“š
    function getUser(id) {
        const transaction = db.transaction(['users']);
        const usersStore = transaction.objectStore('users');
        const request = usersStore.get(id);
        
        request.onsuccess = function() {
            console.log('ç²å–çš„ç”¨æˆ¶:', request.result);
        };
    }
    
    // æ›´æ–°æ•¸æ“š
    function updateUser(user) {
        const transaction = db.transaction(['users'], 'readwrite');
        const usersStore = transaction.objectStore('users');
        const request = usersStore.put(user);
        
        request.onsuccess = function() {
            console.log('ç”¨æˆ¶æ›´æ–°æˆåŠŸ');
        };
    }
    
    // åˆªé™¤æ•¸æ“š
    function deleteUser(id) {
        const transaction = db.transaction(['users'], 'readwrite');
        const usersStore = transaction.objectStore('users');
        const request = usersStore.delete(id);
        
        request.onsuccess = function() {
            console.log('ç”¨æˆ¶åˆªé™¤æˆåŠŸ');
        };
    }
    
    // ä½¿ç”¨ç´¢å¼•æŸ¥è©¢
    function getUserByEmail(email) {
        const transaction = db.transaction(['users']);
        const usersStore = transaction.objectStore('users');
        const emailIndex = usersStore.index('email');
        const request = emailIndex.get(email);
        
        request.onsuccess = function() {
            console.log('é€šéé›»å­éƒµä»¶æ‰¾åˆ°çš„ç”¨æˆ¶:', request.result);
        };
    }
    
    // ä½¿ç”¨æ¸¸æ¨™éæ­·æ‰€æœ‰è¨˜éŒ„
    function getAllUsers() {
        const users = [];
        const transaction = db.transaction(['users']);
        const usersStore = transaction.objectStore('users');
        const request = usersStore.openCursor();
        
        request.onsuccess = function(event) {
            const cursor = event.target.result;
            if (cursor) {
                users.push(cursor.value);
                cursor.continue();
            } else {
                console.log('æ‰€æœ‰ç”¨æˆ¶:', users);
            }
        };
    }
    
    // æ·»åŠ ç¤ºä¾‹ç”¨æˆ¶
    addUser({ id: 1, name: 'å°æ˜', email: 'xiaoming@example.com', age: 30 });
};

// é€£æ¥å¤±æ•—
dbRequest.onerror = function(event) {
    console.error('æ•¸æ“šåº«é€£æ¥å‡ºéŒ¯:', event.target.error);
};</textarea>
                <button class="copy-button" onclick="copyCode('code-indexeddb')">è¤‡è£½</button>
            </div>
            
            <h3>14.4 å­˜å„²é¸æ“‡æŒ‡å—</h3>
            
            <table>
                <tr>
                    <th>å­˜å„²é¡å‹</th>
                    <th>æœ€å¤§å®¹é‡</th>
                    <th>ç”Ÿå‘½é€±æœŸ</th>
                    <th>é©ç”¨å ´æ™¯</th>
                </tr>
                <tr>
                    <td>Cookie</td>
                    <td>4KB</td>
                    <td>å¯è¨­ç½®éæœŸæ™‚é–“</td>
                    <td>å„²å­˜èº«ä»½é©—è­‰ä¿¡æ¯ï¼Œæœå‹™å™¨éœ€è¦è®€å–çš„æ•¸æ“š</td>
                </tr>
                <tr>
                    <td>localStorage</td>
                    <td>5-10MB</td>
                    <td>æ°¸ä¹…ï¼Œç›´åˆ°è¢«æ¸…é™¤</td>
                    <td>æŒä¹…çš„ç”¨æˆ¶åå¥½è¨­ç½®ï¼Œä¸»é¡Œï¼Œéæ•æ„Ÿæ•¸æ“šç·©å­˜</td>
                </tr>
                <tr>
                    <td>sessionStorage</td>
                    <td>5-10MB</td>
                    <td>é é¢æœƒè©±æœŸé–“</td>
                    <td>è¡¨å–®æ•¸æ“šæš«å­˜ï¼Œä¸€æ¬¡æ€§æœƒè©±æ•¸æ“š</td>
                </tr>
                <tr>
                    <td>IndexedDB</td>
                    <td>ç„¡é™åˆ¶(å–æ±ºæ–¼ç£ç›¤ç©ºé–“)</td>
                    <td>æ°¸ä¹…ï¼Œç›´åˆ°è¢«æ¸…é™¤</td>
                    <td>å¤§å‹çµæ§‹åŒ–æ•¸æ“šï¼Œé›¢ç·šæ‡‰ç”¨ï¼Œæ–‡ä»¶/åœ–åƒç·©å­˜</td>
                </tr>
            </table>
            
            <div class="example">
                <p>å­˜å„²å®‰å…¨æ³¨æ„äº‹é …ï¼š</p>
                <ul>
                    <li>æ°¸é ä¸è¦åœ¨å®¢æˆ¶ç«¯å­˜å„²æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç¢¼ã€ä¿¡ç”¨å¡è™Ÿï¼‰</li>
                    <li>Cookieä½¿ç”¨HttpOnlyå’ŒSecureæ¨™è¨˜å¢å¼·å®‰å…¨æ€§</li>
                    <li>å¯¦æ–½å…§å®¹å®‰å…¨ç­–ç•¥(CSP)é˜²æ­¢XSSæ”»æ“Š</li>
                    <li>è€ƒæ…®åŠ å¯†å­˜å„²çš„æ•¸æ“š</li>
                    <li>éµå®ˆæ•¸æ“šéš±ç§æ³•è¦(GDPR, CCPAç­‰)ï¼Œç²å–ç”¨æˆ¶åŒæ„</li>
                </ul>
            </div>
        </section>

        <section id="json" class="section">
            <h2>15. JSONæ“ä½œ</h2>
            <h3>15.1 ä»€éº¼æ˜¯JSONï¼Ÿ</h3>
            <p>JSON (JavaScript Object Notation) æ˜¯ä¸€ç¨®è¼•é‡ç´šçš„æ•¸æ“šäº¤æ›æ ¼å¼ï¼Œæ˜“æ–¼äººé–±è®€å’Œç·¨å¯«ï¼Œä¹Ÿæ˜“æ–¼æ©Ÿå™¨è§£æå’Œç”Ÿæˆã€‚</p>
            
            <div class="example">
                <p>JSONçš„åŸºæœ¬è¦å‰‡ï¼š</p>
                <ul>
                    <li>æ•¸æ“šä»¥åç¨±/å€¼å°è¡¨ç¤º</li>
                    <li>ä½¿ç”¨å¤§æ‹¬è™Ÿ {} ä¿å­˜å°è±¡</li>
                    <li>ä½¿ç”¨æ–¹æ‹¬è™Ÿ [] ä¿å­˜æ•¸çµ„</li>
                    <li>åç¨±å¿…é ˆä½¿ç”¨é›™å¼•è™ŸåŒ…è£¹</li>
                    <li>å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•¸å­—ã€å°è±¡ã€æ•¸çµ„ã€å¸ƒçˆ¾å€¼æˆ–null</li>
                    <li>ä¸æ”¯æŒè¨»é‡‹ã€undefinedã€å‡½æ•¸å’Œæ—¥æœŸå°è±¡</li>
                </ul>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-json-example" readonly>// JSONå°è±¡ç¤ºä¾‹
const personJSON = `{
    "name": "å°æ˜",
    "age": 30,
    "isStudent": false,
    "hobbies": ["é–±è®€", "æ¸¸æ³³", "ç·¨ç¨‹"],
    "address": {
        "city": "å°åŒ—",
        "zipCode": "100"
    },
    "phone": null
}`;

// JSONæ•¸çµ„ç¤ºä¾‹
const arrayJSON = `[
    {
        "id": 1,
        "name": "å°æ˜"
    },
    {
        "id": 2,
        "name": "å°è¯"
    },
    {
        "id": 3,
        "name": "å°æ"
    }
]`;</textarea>
                <button class="copy-button" onclick="copyCode('code-json-example')">è¤‡è£½</button>
            </div>
            
            <h3>15.2 JSON.parse() - è§£æJSON</h3>
            <p>å°‡JSONå­—ç¬¦ä¸²è½‰æ›ç‚ºJavaScriptå°è±¡æˆ–æ•¸çµ„ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-json-parse" readonly>// åŸºæœ¬è§£æ
const jsonString = '{"name":"å°æ˜","age":30}';
const person = JSON.parse(jsonString);

console.log(person.name);  // å°æ˜
console.log(person.age);   // 30

// è§£ææ•¸çµ„
const jsonArray = '[1,2,3,4,5]';
const numbers = JSON.parse(jsonArray);
console.log(numbers[2]);  // 3

// è§£æåµŒå¥—å°è±¡
const complexJson = '{"user":{"name":"å°æ˜","profile":{"age":30,"city":"å°åŒ—"}}}';
const data = JSON.parse(complexJson);
console.log(data.user.profile.city);  // å°åŒ—

// ä½¿ç”¨ç¬¬äºŒå€‹åƒæ•¸ï¼ˆreviverå‡½æ•¸ï¼‰
const jsonWithDate = '{"name":"å°æ˜","birthDate":"2000-01-15"}';
const personWithDate = JSON.parse(jsonWithDate, (key, value) => {
    // è‡ªå‹•å°‡æ—¥æœŸå­—ç¬¦ä¸²è½‰æ›ç‚ºDateå°è±¡
    if (key === 'birthDate') {
        return new Date(value);
    }
    return value;
});

console.log(personWithDate.birthDate.getFullYear());  // 2000

// è™•ç†JSON.parseéŒ¯èª¤
try {
    const invalidJson = '{"name":"å°æ˜",}';  // ç„¡æ•ˆçš„JSONï¼ˆå¤šé¤˜çš„é€—è™Ÿï¼‰
    const parsed = JSON.parse(invalidJson);
} catch (error) {
    console.error('JSONè§£æéŒ¯èª¤:', error.message);
}</textarea>
                <button class="copy-button" onclick="copyCode('code-json-parse')">è¤‡è£½</button>
            </div>
            
            <h3>15.3 JSON.stringify() - åºåˆ—åŒ–ç‚ºJSON</h3>
            <p>å°‡JavaScriptå°è±¡æˆ–æ•¸çµ„è½‰æ›ç‚ºJSONå­—ç¬¦ä¸²ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-json-stringify" readonly>// åŸºæœ¬åºåˆ—åŒ–
const person = {
    name: 'å°æ˜',
    age: 30,
    isStudent: false
};
const jsonString = JSON.stringify(person);
console.log(jsonString);  // {"name":"å°æ˜","age":30,"isStudent":false}

// åºåˆ—åŒ–æ•¸çµ„
const colors = ['ç´…', 'ç¶ ', 'è—'];
const jsonArray = JSON.stringify(colors);
console.log(jsonArray);  // ["ç´…","ç¶ ","è—"]

// ç¾åŒ–è¼¸å‡ºï¼ˆæ ¼å¼åŒ–ï¼‰
const prettyJson = JSON.stringify(person, null, 2);
console.log(prettyJson);
/*
{
  "name": "å°æ˜",
  "age": 30,
  "isStudent": false
}
*/

// ä½¿ç”¨ç¬¬äºŒå€‹åƒæ•¸ï¼ˆreplacerå‡½æ•¸ï¼‰
const personWithPrivate = {
    name: 'å°æ˜',
    age: 30,
    password: '12345',
    _internal: 'some value'
};

// éæ¿¾æ‰ç§æœ‰å±¬æ€§
const filteredJson = JSON.stringify(personWithPrivate, (key, value) => {
    if (key.startsWith('_') || key === 'password') {
        return undefined;  // æ’é™¤æ­¤å±¬æ€§
    }
    return value;
});

console.log(filteredJson);  // {"name":"å°æ˜","age":30}

// ä½¿ç”¨ç¬¬äºŒå€‹åƒæ•¸ï¼ˆreplaceræ•¸çµ„ï¼‰
const selectedJson = JSON.stringify(person, ['name']);
console.log(selectedJson);  // {"name":"å°æ˜"}

// è™•ç†ç‰¹æ®Šå€¼
const specialValues = {
    undef: undefined,        // æœƒè¢«å¿½ç•¥
    func: function() {},     // æœƒè¢«å¿½ç•¥
    sym: Symbol('symbol'),   // æœƒè¢«å¿½ç•¥
    inf: Infinity,           // è½‰æ›ç‚ºnull
    nan: NaN,                // è½‰æ›ç‚ºnull
    date: new Date()         // è½‰æ›ç‚ºISOæ—¥æœŸå­—ç¬¦ä¸²
};

console.log(JSON.stringify(specialValues));
// {"inf":null,"nan":null,"date":"2023-05-15T12:00:00.000Z"}

// ä½¿ç”¨toJSONæ–¹æ³•è‡ªå®šç¾©åºåˆ—åŒ–
const customObject = {
    name: 'å°æ˜',
    birthDate: new Date(2000, 0, 15),
    toJSON: function() {
        return {
            name: this.name,
            birthYear: this.birthDate.getFullYear()
        };
    }
};

console.log(JSON.stringify(customObject));  // {"name":"å°æ˜","birthYear":2000}</textarea>
                <button class="copy-button" onclick="copyCode('code-json-stringify')">è¤‡è£½</button>
            </div>
            
            <h3>15.4 JSONçš„å¸¸è¦‹ç”¨é€”</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-json-usage" readonly>// 1. æ•¸æ“šå­˜å„² - localStorage
const userPreferences = {
    theme: 'dark',
    fontSize: 'large',
    notifications: true
};

// ä¿å­˜åˆ°localStorage
localStorage.setItem('preferences', JSON.stringify(userPreferences));

// è®€å–ä¸¦è§£æ
const savedPreferences = JSON.parse(localStorage.getItem('preferences'));

// 2. æ·±æ‹·è²å°è±¡
const original = { 
    name: 'å°æ˜', 
    profile: { age: 30, city: 'å°åŒ—' } 
};

// å‰µå»ºæ·±æ‹·è²ï¼ˆè™•ç†åµŒå¥—å°è±¡ï¼‰
const deepCopy = JSON.parse(JSON.stringify(original));
deepCopy.profile.city = 'é«˜é›„';  // ä¸æœƒå½±éŸ¿åŸå°è±¡

console.log(original.profile.city);  // å°åŒ—
console.log(deepCopy.profile.city);  // é«˜é›„

// 3. ä½¿ç”¨fetch APIç™¼é€å’Œæ¥æ”¶JSONæ•¸æ“š
fetch('https://api.example.com/data')
    .then(response => response.json())  // è§£æJSONéŸ¿æ‡‰
    .then(data => console.log(data))
    .catch(error => console.error('Error:', error));

// ç™¼é€JSONæ•¸æ“š
fetch('https://api.example.com/users', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({ name: 'å°æ˜', email: 'xiaoming@example.com' })
})
    .then(response => response.json())
    .then(data => console.log('Success:', data))
    .catch(error => console.error('Error:', error));</textarea>
                <button class="copy-button" onclick="copyCode('code-json-usage')">è¤‡è£½</button>
            </div>
        </section>
        
        <section id="api" class="section">
            <h2>16. APIè«‹æ±‚</h2>
            <h3>16.1 ä»€éº¼æ˜¯Web APIï¼Ÿ</h3>
            <p>Web API (Application Programming Interface) æ˜¯å…è¨±ä¸åŒè»Ÿä»¶ç³»çµ±ä¹‹é–“é€šä¿¡çš„æ¥å£ã€‚åœ¨Webé–‹ç™¼ä¸­ï¼ŒAPIé€šå¸¸ä»¥HTTPè«‹æ±‚çš„å½¢å¼æä¾›æ•¸æ“šæˆ–åŠŸèƒ½ã€‚</p>
            
            <div class="example">
                <p>å¸¸è¦‹çš„APIé¡å‹ï¼š</p>
                <ul>
                    <li><strong>REST API</strong>ï¼šä½¿ç”¨HTTPæ–¹æ³•æ“ä½œè³‡æºçš„æ¶æ§‹é¢¨æ ¼</li>
                    <li><strong>GraphQL</strong>ï¼šå…è¨±å®¢æˆ¶ç«¯æŒ‡å®šæ‰€éœ€æ•¸æ“šçš„æŸ¥è©¢èªè¨€</li>
                    <li><strong>WebSocket API</strong>ï¼šæä¾›é›™å‘å¯¦æ™‚é€šä¿¡</li>
                    <li><strong>ç€è¦½å™¨API</strong>ï¼šä¾‹å¦‚åœ°ç†ä½ç½®ã€Webå­˜å„²ã€Canvasç­‰</li>
                </ul>
            </div>
            
            <h3>16.2 XMLHttpRequest</h3>
            <p>XMLHttpRequestæ˜¯æ—©æœŸç™¼é€HTTPè«‹æ±‚çš„æ–¹æ³•ï¼Œç¾åœ¨å¤§å¤šè¢«fetch APIæ›¿ä»£ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-xhr" readonly>// å‰µå»ºä¸€å€‹XMLHttpRequestå°è±¡
const xhr = new XMLHttpRequest();

// é…ç½®è«‹æ±‚
xhr.open('GET', 'https://jsonplaceholder.typicode.com/users/1', true);

// è¨­ç½®éŸ¿æ‡‰é¡å‹
xhr.responseType = 'json';

// è™•ç†éŸ¿æ‡‰
xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 300) {
        // è«‹æ±‚æˆåŠŸ
        console.log('æ•¸æ“šï¼š', xhr.response);
    } else {
        // è«‹æ±‚å¤±æ•—
        console.error('è«‹æ±‚å¤±æ•—ï¼š', xhr.statusText);
    }
};

// è™•ç†éŒ¯èª¤
xhr.onerror = function() {
    console.error('ç¶²çµ¡éŒ¯èª¤');
};

// ç™¼é€è«‹æ±‚
xhr.send();

// ç™¼é€POSTè«‹æ±‚
function postData() {
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://jsonplaceholder.typicode.com/posts', true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    
    xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status < 300) {
            console.log('ç™¼é€æˆåŠŸï¼š', xhr.response);
        } else {
            console.error('è«‹æ±‚å¤±æ•—');
        }
    };
    
    // ç™¼é€JSONæ•¸æ“š
    const data = JSON.stringify({
        title: 'æ¨™é¡Œ',
        body: 'å…§å®¹',
        userId: 1
    });
    
    xhr.send(data);
}</textarea>
                <button class="copy-button" onclick="copyCode('code-xhr')">è¤‡è£½</button>
            </div>
            
            <h3>16.3 Fetch API</h3>
            <p>Fetch APIæ˜¯ç¾ä»£JavaScriptè™•ç†HTTPè«‹æ±‚çš„æ¨™æº–æ–¹å¼ï¼Œå®ƒä½¿ç”¨Promiseï¼Œæ›´ç°¡æ½”å’Œéˆæ´»ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-fetch-api" readonly>// åŸºæœ¬GETè«‹æ±‚
fetch('https://jsonplaceholder.typicode.com/users/1')
    .then(response => {
        // æª¢æŸ¥éŸ¿æ‡‰ç‹€æ…‹
        if (!response.ok) {
            throw new Error('ç¶²çµ¡éŸ¿æ‡‰ä¸æ­£å¸¸: ' + response.status);
        }
        return response.json();  // è§£æJSONéŸ¿æ‡‰
    })
    .then(data => {
        console.log('ç”¨æˆ¶æ•¸æ“šï¼š', data);
    })
    .catch(error => {
        console.error('ç²å–æ•¸æ“šå‡ºéŒ¯ï¼š', error);
    });

// POSTè«‹æ±‚
fetch('https://jsonplaceholder.typicode.com/posts', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        title: 'æ¨™é¡Œ',
        body: 'å…§å®¹',
        userId: 1
    })
})
    .then(response => response.json())
    .then(data => {
        console.log('å‰µå»ºçš„å¸–å­ï¼š', data);
    })
    .catch(error => {
        console.error('éŒ¯èª¤ï¼š', error);
    });

// ä½¿ç”¨async/awaitç°¡åŒ–
async function fetchData() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
        
        if (!response.ok) {
            throw new Error('ç¶²çµ¡éŸ¿æ‡‰ä¸æ­£å¸¸: ' + response.status);
        }
        
        const data = await response.json();
        console.log('ç”¨æˆ¶æ•¸æ“šï¼š', data);
        return data;
    } catch (error) {
        console.error('ç²å–æ•¸æ“šå‡ºéŒ¯ï¼š', error);
    }
}

// å…¶ä»–HTTPæ–¹æ³•
async function updatePost(id, data) {
    try {
        const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`, {
            method: 'PUT',  // æˆ– 'PATCH' é€²è¡Œéƒ¨åˆ†æ›´æ–°
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
        
        if (!response.ok) throw new Error('æ›´æ–°å¤±æ•—');
        
        return await response.json();
    } catch (error) {
        console.error('æ›´æ–°éŒ¯èª¤ï¼š', error);
    }
}

async function deletePost(id) {
    try {
        const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`, {
            method: 'DELETE'
        });
        
        if (!response.ok) throw new Error('åˆªé™¤å¤±æ•—');
        
        return response.status === 204 ? true : await response.json();
    } catch (error) {
        console.error('åˆªé™¤éŒ¯èª¤ï¼š', error);
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-fetch-api')">è¤‡è£½</button>
            </div>
            
            <h3>16.4 Fetch APIçš„é«˜ç´šç‰¹æ€§</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-fetch-advanced" readonly>// è¨­ç½®è«‹æ±‚è¶…æ™‚
async function fetchWithTimeout(url, options = {}, timeout = 5000) {
    const controller = new AbortController();
    const id = setTimeout(() => controller.abort(), timeout);
    
    try {
        const response = await fetch(url, {
            ...options,
            signal: controller.signal
        });
        clearTimeout(id);
        return response;
    } catch (error) {
        clearTimeout(id);
        if (error.name === 'AbortError') {
            throw new Error('è«‹æ±‚è¶…æ™‚');
        }
        throw error;
    }
}

// ç™¼é€è¡¨å–®æ•¸æ“š
async function submitForm(formData) {
    try {
        const response = await fetch('https://example.com/submit', {
            method: 'POST',
            body: formData  // FormDataå°è±¡ç›´æ¥ç™¼é€
        });
        return await response.json();
    } catch (error) {
        console.error('è¡¨å–®æäº¤éŒ¯èª¤ï¼š', error);
    }
}

// ä¸Šå‚³æ–‡ä»¶
async function uploadFile(file) {
    const formData = new FormData();
    formData.append('file', file);
    
    try {
        const response = await fetch('https://example.com/upload', {
            method: 'POST',
            body: formData
        });
        return await response.json();
    } catch (error) {
        console.error('æ–‡ä»¶ä¸Šå‚³éŒ¯èª¤ï¼š', error);
    }
}

// è®€å–äºŒé€²åˆ¶æ•¸æ“š
async function fetchImage() {
    try {
        const response = await fetch('https://example.com/image.jpg');
        const blob = await response.blob();
        
        // å‰µå»ºä¸€å€‹URLå°è±¡
        const imageUrl = URL.createObjectURL(blob);
        
        // é¡¯ç¤ºåœ–åƒ
        const img = document.createElement('img');
        img.src = imageUrl;
        document.body.appendChild(img);
        
        // ä½¿ç”¨å®Œç•¢å¾Œé‡‹æ”¾URL
        setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);
    } catch (error) {
        console.error('ç²å–åœ–åƒéŒ¯èª¤ï¼š', error);
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-fetch-advanced')">è¤‡è£½</button>
            </div>
            
            <h3>16.5 è·¨åŸŸè³‡æºå…±äº« (CORS)</h3>
            <p>CORSæ˜¯ä¸€ç¨®HTTPé ­éƒ¨æ©Ÿåˆ¶ï¼Œå…è¨±æœå‹™å™¨æŒ‡å®šå“ªäº›å…¶ä»–åŸŸå¯ä»¥è¨ªå•å…¶è³‡æºã€‚</p>
            
            <div class="example">
                <p>CORSè«‹æ±‚é¡å‹ï¼š</p>
                <ol>
                    <li><strong>ç°¡å–®è«‹æ±‚</strong>ï¼šåŸºæœ¬GETã€HEADæˆ–POSTè«‹æ±‚ï¼Œåªä½¿ç”¨æ¨™æº–é ­éƒ¨</li>
                    <li><strong>é æª¢è«‹æ±‚</strong>ï¼šç™¼é€OPTIONSè«‹æ±‚æª¢æŸ¥æœå‹™å™¨æ˜¯å¦å…è¨±å¯¦éš›è«‹æ±‚</li>
                </ol>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-cors" readonly>// ç°¡å–®çš„è·¨åŸŸè«‹æ±‚
fetch('https://api.another-domain.com/data')
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('è·¨åŸŸè«‹æ±‚å¤±æ•—ï¼š', error));

// åŒ…å«è‡ªå®šç¾©é ­éƒ¨çš„è·¨åŸŸè«‹æ±‚ï¼ˆæœƒè§¸ç™¼é æª¢è«‹æ±‚ï¼‰
fetch('https://api.another-domain.com/data', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-Custom-Header': 'value'  // è‡ªå®šç¾©é ­éƒ¨
    },
    body: JSON.stringify({ key: 'value' })
})
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('è·¨åŸŸè«‹æ±‚å¤±æ•—ï¼š', error));

// è·¨åŸŸè«‹æ±‚æ”œå¸¶æ†‘è­‰ï¼ˆcookiesï¼‰
fetch('https://api.another-domain.com/data', {
    credentials: 'include'  // ç™¼é€cookiesç­‰æ†‘è­‰
})
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.error('è·¨åŸŸè«‹æ±‚å¤±æ•—ï¼š', error));</textarea>
                <button class="copy-button" onclick="copyCode('code-cors')">è¤‡è£½</button>
            </div>
            
            <h3>16.6 APIè«‹æ±‚æœ€ä½³å¯¦è¸</h3>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-api-best-practices" readonly>// 1. å‰µå»ºAPIæœå‹™æ¨¡å¡Š
// api.js
const API_BASE_URL = 'https://api.example.com';

// é€šç”¨è«‹æ±‚å‡½æ•¸
async function request(endpoint, options = {}) {
    const url = `${API_BASE_URL}${endpoint}`;
    
    // åˆä½µé»˜èªé¸é …
    const fetchOptions = {
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${getAuthToken()}`
        },
        ...options
    };
    
    try {
        const response = await fetch(url, fetchOptions);
        
        // è™•ç†HTTPéŒ¯èª¤
        if (!response.ok) {
            const error = await response.json().catch(() => ({}));
            throw new Error(error.message || `HTTP error! Status: ${response.status}`);
        }
        
        // è™•ç†ç©ºéŸ¿æ‡‰
        if (response.status === 204) {
            return null;
        }
        
        // è§£æJSONéŸ¿æ‡‰
        return await response.json();
    } catch (error) {
        // è™•ç†ç¶²çµ¡éŒ¯èª¤ã€è§£æéŒ¯èª¤ç­‰
        console.error(`APIè«‹æ±‚å¤±æ•— (${endpoint}):`, error);
        throw error;
    }
}

// å„ç¨®APIç«¯é»
const api = {
    // ç”¨æˆ¶ç›¸é—œ
    users: {
        getAll: () => request('/users'),
        getById: (id) => request(`/users/${id}`),
        create: (data) => request('/users', { 
            method: 'POST',
            body: JSON.stringify(data)
        }),
        update: (id, data) => request(`/users/${id}`, { 
            method: 'PUT',
            body: JSON.stringify(data)
        }),
        delete: (id) => request(`/users/${id}`, { method: 'DELETE' })
    },
    
    // èªè­‰ç›¸é—œ
    auth: {
        login: (credentials) => request('/auth/login', { 
            method: 'POST',
            body: JSON.stringify(credentials)
        }),
        logout: () => request('/auth/logout', { method: 'POST' })
    }
};

// 2. å¯¦ç¾é‡è©¦æ©Ÿåˆ¶
async function fetchWithRetry(url, options = {}, retries = 3) {
    try {
        return await fetch(url, options);
    } catch (error) {
        if (retries <= 1) throw error;
        
        // ç­‰å¾…ä¸€æ®µæ™‚é–“å¾Œé‡è©¦
        await new Promise(resolve => setTimeout(resolve, 1000));
        return fetchWithRetry(url, options, retries - 1);
    }
}

// 3. ç·©å­˜è«‹æ±‚çµæœ
const cache = new Map();

async function fetchWithCache(url, options = {}, cacheTime = 60000) {
    const cacheKey = `${url}-${JSON.stringify(options)}`;
    
    // æª¢æŸ¥ç·©å­˜æ˜¯å¦æœ‰æ•ˆ
    if (cache.has(cacheKey)) {
        const cachedData = cache.get(cacheKey);
        if (Date.now() - cachedData.timestamp < cacheTime) {
            return cachedData.data;
        }
    }
    
    // ç™¼é€å¯¦éš›è«‹æ±‚
    const response = await fetch(url, options);
    const data = await response.json();
    
    // æ›´æ–°ç·©å­˜
    cache.set(cacheKey, {
        data,
        timestamp: Date.now()
    });
    
    return data;
}</textarea>
                <button class="copy-button" onclick="copyCode('code-api-best-practices')">è¤‡è£½</button>
            </div>
        </section>
        
        <section id="debugging" class="section">
            <h2>17. èª¿è©¦æŠ€å·§</h2>
            <h3>17.1 ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·</h3>
            <p>ç¾ä»£ç€è¦½å™¨å…§ç½®çš„é–‹ç™¼è€…å·¥å…·æ˜¯JavaScriptèª¿è©¦çš„æœ€å¼·å¤§å·¥å…·ä¹‹ä¸€ã€‚</p>
            
            <div class="example">
                <p>é–‹å•Ÿé–‹ç™¼è€…å·¥å…·çš„æ–¹æ³•ï¼š</p>
                <ul>
                    <li>Chrome/Edgeï¼šæŒ‰ F12 æˆ– Ctrl+Shift+I (Windows) / Cmd+Option+I (Mac)</li>
                    <li>Firefoxï¼šæŒ‰ F12 æˆ– Ctrl+Shift+I (Windows) / Cmd+Option+I (Mac)</li>
                    <li>Safariï¼šé–‹å•Ÿ"é–‹ç™¼"èœå–®ï¼Œç„¶å¾Œé¸æ“‡"é¡¯ç¤ºWebæª¢æŸ¥å™¨"</li>
                </ul>
            </div>
            
            <h4>17.1.1 æ§åˆ¶å°é¢æ¿ (Console)</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-console" readonly>// åŸºæœ¬æ—¥èªŒè¼¸å‡º
console.log('åŸºæœ¬ä¿¡æ¯');
console.info('ä¿¡æ¯æ¶ˆæ¯');
console.warn('è­¦å‘Šæ¶ˆæ¯');
console.error('éŒ¯èª¤æ¶ˆæ¯');

// å°è±¡å’Œé™£åˆ—çš„è¼¸å‡º
let person = { name: 'å°æ˜', age: 30 };
console.log('ç”¨æˆ¶ä¿¡æ¯:', person);

let numbers = [1, 2, 3, 4, 5];
console.table(numbers);  // ä»¥è¡¨æ ¼å½¢å¼é¡¯ç¤º

// åˆ†çµ„è¼¸å‡º
console.group('ç”¨æˆ¶è©³æƒ…');
console.log('å§“å: å°æ˜');
console.log('å¹´é½¡: 30');
console.groupEnd();

// è¨ˆæ™‚æ“ä½œ
console.time('æ“ä½œ');
// ... é€²è¡Œä¸€äº›æ“ä½œ
console.timeEnd('æ“ä½œ');  // è¼¸å‡ºæ“ä½œè€—æ™‚

// è¨ˆæ•¸
for (let i = 0; i < 5; i++) {
    console.count('å¾ªç’°è¨ˆæ•¸');
}

// æ¢ä»¶æ—¥èªŒ
console.assert(1 === 2, 'æ–·è¨€å¤±æ•—');  // åªåœ¨æ¢ä»¶ç‚ºfalseæ™‚è¼¸å‡º

// æ¸…ç©ºæ§åˆ¶å°
console.clear();</textarea>
                <button class="copy-button" onclick="copyCode('code-console')">è¤‡è£½</button>
            </div>
            
            <h4>17.1.2 æ–·é»èª¿è©¦</h4>
            <p>ä½¿ç”¨æ–·é»å¯ä»¥æš«åœä»£ç¢¼åŸ·è¡Œï¼Œé€è¡Œæª¢æŸ¥è®Šæ•¸ç‹€æ…‹å’Œç¨‹åºæµç¨‹ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-breakpoints" readonly>// æ–¹æ³•1ï¼šåœ¨é–‹ç™¼è€…å·¥å…·Sourcesé¢æ¿ä¸­é»æ“Šè¡Œè™Ÿè¨­ç½®æ–·é»

// æ–¹æ³•2ï¼šä½¿ç”¨debuggerèªå¥ï¼ˆç¨‹å¼ç¢¼æ–·é»ï¼‰
function calculateTotal(items) {
    debugger;  // ç¨‹åºå°‡åœ¨æ­¤è™•æš«åœåŸ·è¡Œ
    let total = 0;
    for (let i = 0; i < items.length; i++) {
        total += items[i].price;
    }
    return total;
}

// æ–¹æ³•3ï¼šæ¢ä»¶æ–·é»
// åœ¨Sourcesé¢æ¿ä¸­å³éµé»æ“Šè¡Œè™Ÿï¼Œé¸æ“‡"Add conditional breakpoint"
// ä¾‹å¦‚è¨­ç½®æ¢ä»¶ï¼š i === 5

// æ–¹æ³•4ï¼šDOMè®ŠåŒ–æ–·é»
// åœ¨Elementsé¢æ¿ä¸­å³éµé»æ“Šå…ƒç´ ï¼Œé¸æ“‡"Break on..."</textarea>
                <button class="copy-button" onclick="copyCode('code-breakpoints')">è¤‡è£½</button>
            </div>
            
            <h3>17.2 å¸¸è¦‹èª¿è©¦æŠ€å·§</h3>
            
            <h4>17.2.1 èª¿è©¦éŒ¯èª¤å †ç–Š</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-error-stack" readonly>// æ•ç²ä¸¦åˆ†æéŒ¯èª¤å †ç–Š
try {
    // æ•…æ„è£½é€ ä¸€å€‹éŒ¯èª¤
    let obj = null;
    obj.someProperty = 42;
} catch (error) {
    console.error('éŒ¯èª¤ä¿¡æ¯:', error.message);
    console.error('éŒ¯èª¤å †ç–Š:', error.stack);
    // å †ç–Šè·Ÿè¹¤é¡¯ç¤ºäº†éŒ¯èª¤ç™¼ç”Ÿçš„ä½ç½®å’Œå‘¼å«é †åº
}</textarea>
                <button class="copy-button" onclick="copyCode('code-error-stack')">è¤‡è£½</button>
            </div>
            
            <h4>17.2.2 ä½¿ç”¨try-catché€²è¡Œèª¿è©¦</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-debug-trycatch" readonly>// ä½¿ç”¨try-catché€²è¡Œå®šä½éŒ¯èª¤
function processUserData(userData) {
    try {
        console.log('è™•ç†ç”¨æˆ¶æ•¸æ“š...');
        validateUser(userData);
        updateUserProfile(userData);
        notifyUser(userData.id);
        return true;
    } catch (error) {
        console.error('è™•ç†ç”¨æˆ¶æ•¸æ“šæ™‚å‡ºéŒ¯:', error.message);
        console.error('å †ç–Š:', error.stack);
        // å¯ä»¥æ ¹æ“šéŒ¯èª¤é¡å‹æˆ–æ¶ˆæ¯é€²è¡Œä¸åŒè™•ç†
        return false;
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-debug-trycatch')">è¤‡è£½</button>
            </div>
            
            <h3>17.3 é«˜ç´šèª¿è©¦æŠ€å·§</h3>
            
            <h4>17.3.1 ç›£æ§è®Šæ•¸</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-monitor-variables" readonly>// 1. ä½¿ç”¨ console.log è·Ÿè¸ªè®Šæ•¸
function calculateArea(width, height) {
    console.log(`åˆå§‹å€¼ - å¯¬åº¦: ${width}, é«˜åº¦: ${height}`);
    
    width = Math.abs(width);
    height = Math.abs(height);
    console.log(`çµ•å°å€¼è½‰æ›å¾Œ - å¯¬åº¦: ${width}, é«˜åº¦: ${height}`);
    
    const area = width * height;
    console.log(`è¨ˆç®—çµæœ - é¢ç©: ${area}`);
    
    return area;
}

// 2. åœ¨Sourcesé¢æ¿ä¸­ä½¿ç”¨Watchè¡¨é”å¼
// åœ¨èª¿è©¦æ™‚æ·»åŠ è¡¨é”å¼å¦‚ width, height, width*height

// 3. ä½¿ç”¨ Object.observe (å·²æ£„ç”¨) æˆ– Proxy ç›£è¦–å°è±¡è®ŠåŒ–
const user = { name: 'å°æ˜', score: 0 };

const userProxy = new Proxy(user, {
    set(target, property, value) {
        console.log(`${property} å¾ ${target[property]} è®Šæ›´ç‚º ${value}`);
        target[property] = value;
        return true;
    }
});

userProxy.score = 100;  // è¼¸å‡º: "score å¾ 0 è®Šæ›´ç‚º 100"</textarea>
                <button class="copy-button" onclick="copyCode('code-monitor-variables')">è¤‡è£½</button>
            </div>
            
            <h4>17.3.2 æ€§èƒ½åˆ†æ</h4>
            <div class="runnable-code">
                <textarea class="code-editor" id="code-performance" readonly>// ä½¿ç”¨ Performance API æ¸¬é‡ä»£ç¢¼åŸ·è¡Œæ™‚é–“
function measurePerformance() {
    performance.mark('startTask');
    
    // åŸ·è¡Œéœ€è¦æ¸¬é‡çš„ä»£ç¢¼
    for (let i = 0; i < 1000000; i++) {
        Math.sqrt(i);
    }
    
    performance.mark('endTask');
    performance.measure('taskDuration', 'startTask', 'endTask');
    
    const measures = performance.getEntriesByName('taskDuration');
    console.log(`ä»»å‹™è€—æ™‚: ${measures[0].duration} æ¯«ç§’`);
    
    // æ¸…é™¤æ¨™è¨˜
    performance.clearMarks();
    performance.clearMeasures();
}

// ä½¿ç”¨ console.time/timeEnd æ¸¬é‡
function simplePerformanceMeasure() {
    console.time('å¾ªç’°æ“ä½œ');
    
    for (let i = 0; i < 1000000; i++) {
        Math.sqrt(i);
    }
    
    console.timeEnd('å¾ªç’°æ“ä½œ');
}

// ä½¿ç”¨Chromeé–‹ç™¼è€…å·¥å…·çš„Performanceé¢æ¿è¨˜éŒ„æ›´è©³ç´°çš„æ€§èƒ½åˆ†æ</textarea>
                <button class="copy-button" onclick="copyCode('code-performance')">è¤‡è£½</button>
            </div>
            
            <h3>17.4 é ç¨‹èª¿è©¦</h3>
            <p>é ç¨‹èª¿è©¦å…è¨±ä½ åœ¨ä¸€å€‹è¨­å‚™ä¸Šèª¿è©¦åœ¨å¦ä¸€å€‹è¨­å‚™ä¸Šé‹è¡Œçš„ä»£ç¢¼ã€‚</p>
            
            <div class="example">
                <p>é ç¨‹èª¿è©¦æ­¥é©Ÿï¼š</p>
                <ol>
                    <li>Chromeé ç¨‹èª¿è©¦Androidï¼šé€£æ¥Androidè¨­å‚™ï¼Œé–‹å•Ÿé–‹ç™¼è€…é¸é …ï¼Œè¨ªå•chrome://inspect</li>
                    <li>Safarié ç¨‹èª¿è©¦iOSï¼šé€£æ¥iOSè¨­å‚™ï¼Œé–‹å•Ÿé–‹ç™¼è€…èœå–®ï¼Œé¸æ“‡é€£æ¥çš„è¨­å‚™</li>
                    <li>VS Codeå’ŒChromeé€²è¡Œèª¿è©¦ï¼šä½¿ç”¨Chrome Debuggeræ“´å±•</li>
                </ol>
            </div>
            
            <h3>17.5 æ—¥èªŒå’Œèª¿è©¦æœ€ä½³å¯¦è¸</h3>
            
            <div class="example">
                <p>æœ‰æ•ˆçš„èª¿è©¦å¯¦è¸ï¼š</p>
                <ul>
                    <li>ä½¿ç”¨æè¿°æ€§çš„æ—¥èªŒæ¶ˆæ¯ï¼šæ¸…æ™°æ¨™ç¤ºæ—¥èªŒé»çš„ä½ç½®å’Œç›®çš„</li>
                    <li>åˆ†ç´šæ—¥èªŒï¼šä½¿ç”¨ä¸åŒç´šåˆ¥ï¼ˆlog, info, warn, errorï¼‰æ¨™ç¤ºé‡è¦æ€§</li>
                    <li>é¿å…åœ¨ç”Ÿç”¢ç’°å¢ƒç•™ä¸‹èª¿è©¦ä»£ç¢¼ï¼šä½¿ç”¨æ¢ä»¶æ—¥èªŒæˆ–æ§‹å»ºå·¥å…·ç§»é™¤</li>
                    <li>ä½¿ç”¨çµæ§‹åŒ–æ—¥èªŒï¼šåŒ…å«æ™‚é–“æˆ³ã€ä¸Šä¸‹æ–‡ä¿¡æ¯ç­‰</li>
                    <li>è€ƒæ…®ä½¿ç”¨å°ˆæ¥­çš„æ—¥èªŒåº«ï¼šå¦‚winston(Node.js)ã€loglevel(ç€è¦½å™¨)</li>
                </ul>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-logging-practices" readonly>// å‰µå»ºä¸€å€‹ç°¡å–®çš„æ—¥èªŒå·¥å…·
const Logger = {
    level: 'info', // debug, info, warn, error
    
    levels: {
        debug: 0,
        info: 1,
        warn: 2,
        error: 3
    },
    
    debug(message, ...args) {
        if (this.levels[this.level] <= this.levels.debug) {
            console.debug(`[DEBUG][${new Date().toISOString()}]`, message, ...args);
        }
    },
    
    info(message, ...args) {
        if (this.levels[this.level] <= this.levels.info) {
            console.info(`[INFO][${new Date().toISOString()}]`, message, ...args);
        }
    },
    
    warn(message, ...args) {
        if (this.levels[this.level] <= this.levels.warn) {
            console.warn(`[WARN][${new Date().toISOString()}]`, message, ...args);
        }
    },
    
    error(message, ...args) {
        if (this.levels[this.level] <= this.levels.error) {
            console.error(`[ERROR][${new Date().toISOString()}]`, message, ...args);
        }
    },
    
    // ç”Ÿç”¢ç’°å¢ƒè¨­ç½®
    setProduction() {
        this.level = 'error';  // åœ¨ç”Ÿç”¢ç’°å¢ƒåªé¡¯ç¤ºéŒ¯èª¤
    }
};

// ä½¿ç”¨ç¤ºä¾‹
Logger.debug('é€™æ˜¯èª¿è©¦ä¿¡æ¯');
Logger.info('ç”¨æˆ¶å·²ç™»å…¥', { userId: 123 });
Logger.warn('APIè«‹æ±‚è¶…æ™‚ï¼Œé‡è©¦ä¸­...');
Logger.error('ç„¡æ³•é€£æ¥åˆ°æ•¸æ“šåº«', { dbName: 'users', errorCode: 500 });

// åœ¨ç”Ÿç”¢ç’°å¢ƒ
if (process.env.NODE_ENV === 'production') {
    Logger.setProduction();
}</textarea>
                <button class="copy-button" onclick="copyCode('code-logging-practices')">è¤‡è£½</button>
            </div>
        </section>

        <section id="best-practices" class="section">
            <h2>18. æœ€ä½³å¯¦è¸</h2>
            <h3>18.1 ä»£ç¢¼é¢¨æ ¼èˆ‡è¦ç¯„</h3>
            <p>è‰¯å¥½çš„ä»£ç¢¼é¢¨æ ¼æé«˜å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ï¼Œæ¸›å°‘éŒ¯èª¤ã€‚</p>
            
            <div class="example">
                <p>JavaScripté¢¨æ ¼æŒ‡å—ï¼š</p>
                <ul>
                    <li>Airbnb JavaScripté¢¨æ ¼æŒ‡å—</li>
                    <li>Google JavaScripté¢¨æ ¼æŒ‡å—</li>
                    <li>StandardJS</li>
                </ul>
            </div>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-style-guide" readonly>// 1. ä½¿ç”¨ä¸€è‡´çš„å‘½åç´„å®š
// é§å³°å‘½åæ³•ï¼ˆcamelCaseï¼‰ç”¨æ–¼è®Šæ•¸å’Œå‡½æ•¸
let userName = 'xiaoming';
function calculateTotal() { }

// å¸•æ–¯å¡å‘½åæ³•ï¼ˆPascalCaseï¼‰ç”¨æ–¼é¡å’Œæ§‹é€ å‡½æ•¸
class UserProfile { }
function Person(name) { }

// å…¨å¤§å¯«ç”¨æ–¼å¸¸é‡
const MAX_SIZE = 100;
const API_KEY = 'abc123';

// 2. ä½¿ç”¨æœ‰æ„ç¾©çš„è®Šæ•¸å’Œå‡½æ•¸å
// ä¸å¥½çš„ä¾‹å­
let a = 5;
function fn(x, y) {
    return x + y;
}

// å¥½çš„ä¾‹å­
let userAge = 5;
function calculateSum(firstNumber, secondNumber) {
    return firstNumber + secondNumber;
}

// 3. ä¿æŒå‡½æ•¸ç°¡çŸ­ï¼Œå°ˆæ³¨æ–¼å–®ä¸€è·è²¬
// ä¸å¥½çš„ä¾‹å­ï¼šå‡½æ•¸åšå¤ªå¤šäº‹æƒ…
function processUser(user) {
    validateUser(user);
    updateUserInDatabase(user);
    sendEmail(user.email);
    updateUIWithUserData(user);
}

// å¥½çš„ä¾‹å­ï¼šåˆ†è§£ç‚ºå°å‡½æ•¸
function processUser(user) {
    if (validateUser(user)) {
        const updatedUser = updateUserInDatabase(user);
        notifyUserChanges(updatedUser);
        return updatedUser;
    }
    return null;
}

// 4. é©ç•¶ä½¿ç”¨è¨»é‡‹
// è§£é‡‹ç‚ºä»€éº¼ï¼Œè€Œä¸æ˜¯è§£é‡‹ä»€éº¼
// ä¸å¥½çš„ä¾‹å­
// å°‡å¹´é½¡åŠ 1
age += 1;

// å¥½çš„ä¾‹å­
// æ¯å¹´æ›´æ–°ç”¨æˆ¶å¹´é½¡ä»¥ç¬¦åˆç”Ÿæ—¥å¾Œçš„å¯¦éš›å¹´é½¡
age += 1;</textarea>
                <button class="copy-button" onclick="copyCode('code-style-guide')">è¤‡è£½</button>
            </div>
            
            <h3>18.2 æ€§èƒ½å„ªåŒ–</h3>
            <p>JavaScriptæ€§èƒ½å„ªåŒ–æœ‰åŠ©æ–¼å‰µå»ºåæ‡‰éˆæ•çš„ç”¨æˆ¶é«”é©—ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-performance-tips" readonly>// 1. æ¸›å°‘DOMæ“ä½œ
// ä¸å¥½çš„ä¾‹å­ï¼šé »ç¹æ“ä½œDOM
for (let i = 0; i < 100; i++) {
    document.getElementById('container').innerHTML += `<div>${i}</div>`;
}

// å¥½çš„ä¾‹å­ï¼šæ‰¹é‡æ“ä½œDOM
let content = '';
for (let i = 0; i < 100; i++) {
    content += `<div>${i}</div>`;
}
document.getElementById('container').innerHTML = content;

// æ›´å¥½çš„ä¾‹å­ï¼šä½¿ç”¨DocumentFragment
const fragment = document.createDocumentFragment();
for (let i = 0; i < 100; i++) {
    const div = document.createElement('div');
    div.textContent = i;
    fragment.appendChild(div);
}
document.getElementById('container').appendChild(fragment);

// 2. é¿å…å…§å­˜æ´©æ¼
// ä¸å¥½çš„ä¾‹å­ï¼šå‰µå»ºé–‰åŒ…ä½†ä¸é‡‹æ”¾
function createButtons() {
    let count = 0;
    
    document.getElementById('button').addEventListener('click', function() {
        console.log(++count);
    });
}

// å¥½çš„ä¾‹å­ï¼šæ¸…ç†äº‹ä»¶ç›£è½å™¨
function setupButton() {
    let count = 0;
    const button = document.getElementById('button');
    
    function handleClick() {
        console.log(++count);
    }
    
    button.addEventListener('click', handleClick);
    
    // æä¾›æ¸…ç†æ–¹æ³•
    return function cleanup() {
        button.removeEventListener('click', handleClick);
    };
}

// 3. å„ªåŒ–å¾ªç’°
// ä¸å¥½çš„ä¾‹å­
const arr = [1, 2, 3, 4, 5];
for (let i = 0; i < arr.length; i++) {
    console.log(arr[i]);
}

// å¥½çš„ä¾‹å­ï¼šç·©å­˜é•·åº¦
const arr2 = [1, 2, 3, 4, 5];
for (let i = 0, len = arr2.length; i < len; i++) {
    console.log(arr2[i]);
}

// 4. ä½¿ç”¨é©ç•¶çš„æ•¸æ“šçµæ§‹
// é »ç¹æŸ¥æ‰¾ï¼šä½¿ç”¨Objectæˆ–Mapè€Œä¸æ˜¯Array
const userMap = new Map();
userMap.set('user1', { name: 'å°æ˜', age: 30 });
userMap.set('user2', { name: 'å°è¯', age: 25 });

// å¿«é€ŸæŸ¥æ‰¾
const user = userMap.get('user1');</textarea>
                <button class="copy-button" onclick="copyCode('code-performance-tips')">è¤‡è£½</button>
            </div>
            
            <h3>18.3 å®‰å…¨æœ€ä½³å¯¦è¸</h3>
            <p>Webæ‡‰ç”¨çš„å®‰å…¨æ€§è‡³é—œé‡è¦ï¼Œå¯ä»¥é˜²æ­¢å¸¸è¦‹çš„æ”»æ“Šã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-security" readonly>// 1. é˜²æ­¢XSSï¼ˆè·¨ç«™è…³æœ¬æ”»æ“Šï¼‰
// ä¸å®‰å…¨çš„ä¾‹å­
function displayUserInput(input) {
    document.getElementById('output').innerHTML = input;
}

// å®‰å…¨çš„ä¾‹å­ï¼šHTMLè½‰ç¾©
function displayUserInputSafely(input) {
    const escaped = input
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
    
    document.getElementById('output').innerHTML = escaped;
}

// æ›´å¥½çš„æ–¹æ³•ï¼šä½¿ç”¨textContentè€Œä¸æ˜¯innerHTML
function displayUserInputTextContent(input) {
    document.getElementById('output').textContent = input;
}

// 2. é˜²æ­¢åŸå‹æ±¡æŸ“
// ä¸å®‰å…¨çš„ä¾‹å­
function mergeOptions(options) {
    const defaults = { mode: 'dark', fontSize: 16 };
    for (const key in options) {
        defaults[key] = options[key];
    }
    return defaults;
}

// å®‰å…¨çš„ä¾‹å­ï¼šæª¢æŸ¥è‡ªæœ‰å±¬æ€§
function mergeOptionsSafely(options) {
    const defaults = { mode: 'dark', fontSize: 16 };
    for (const key in options) {
        if (Object.prototype.hasOwnProperty.call(options, key)) {
            defaults[key] = options[key];
        }
    }
    return defaults;
}

// æ›´å®‰å…¨çš„ä¾‹å­ï¼šä½¿ç”¨Object.assignæˆ–å±•é–‹é‹ç®—ç¬¦
function mergeOptionsModern(options) {
    const defaults = { mode: 'dark', fontSize: 16 };
    return { ...defaults, ...options };
}

// 3. å®‰å…¨åœ°è™•ç†JSONæ•¸æ“š
function parseJSON(jsonString) {
    try {
        return JSON.parse(jsonString);
    } catch (e) {
        console.error('Invalid JSON:', e);
        return null;
    }
}

// 4. é¿å…evalå’Œé¡ä¼¼å‡½æ•¸
// ä¸å®‰å…¨çš„ä¾‹å­
function calculateFromUserInput(input) {
    return eval(input);  // éå¸¸å±éšªï¼
}

// å®‰å…¨çš„ä¾‹å­ï¼šä½¿ç”¨å°ˆç”¨è§£æå™¨æˆ–é™åˆ¶è¼¸å…¥
function calculateSafely(input) {
    // ä½¿ç”¨æ­£å‰‡è¡¨é”å¼åªå…è¨±æ•¸å­—å’ŒåŸºæœ¬é‹ç®—ç¬¦
    if (/^[0-9+\-*/().]+$/.test(input)) {
        // ä½¿ç”¨Functionæ¯”evalç¨å®‰å…¨ï¼Œä½†ä»éœ€è¬¹æ…
        return new Function('return ' + input)();
    }
    throw new Error('Invalid input');
}</textarea>
                <button class="copy-button" onclick="copyCode('code-security')">è¤‡è£½</button>
            </div>
            
            <h3>18.4 ä»£ç¢¼çµ„ç¹”èˆ‡æ¨¡å¡ŠåŒ–</h3>
            <p>è‰¯å¥½çš„ä»£ç¢¼çµ„ç¹”ä½¿ä»£ç¢¼æ›´æ˜“æ–¼ç†è§£ã€æ¸¬è©¦å’Œç¶­è­·ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-organization" readonly>// 1. æ¨¡å¡Šæ¨¡å¼ï¼ˆé–‰åŒ…ï¼‰
const userModule = (function() {
    // ç§æœ‰è®Šæ•¸å’Œå‡½æ•¸
    let userCount = 0;
    const users = [];
    
    function validateUser(user) {
        return user.name && user.email;
    }
    
    // å…¬é–‹çš„API
    return {
        addUser: function(user) {
            if (validateUser(user)) {
                users.push(user);
                userCount++;
                return true;
            }
            return false;
        },
        
        getUserCount: function() {
            return userCount;
        },
        
        getUsers: function() {
            return [...users]; // è¿”å›å‰¯æœ¬ï¼Œé˜²æ­¢å¤–éƒ¨ä¿®æ”¹
        }
    };
})();

// 2. ES6æ¨¡å¡Š
// user-service.js
export class UserService {
    constructor() {
        this.users = [];
    }
    
    addUser(user) {
        this.users.push(user);
    }
    
    getUsers() {
        return [...this.users];
    }
}

// 3. å–®ä¸€è·è²¬åŸå‰‡
// æ¯å€‹æ¨¡å¡Š/é¡åªè² è²¬ä¸€å€‹åŠŸèƒ½å€åŸŸ
// auth.js - è™•ç†èªè­‰
// api.js - è™•ç†APIè«‹æ±‚
// user-manager.js - ç®¡ç†ç”¨æˆ¶æ•¸æ“š
// ui-controller.js - è™•ç†UIæ›´æ–°

// 4. ä¾è³´æ³¨å…¥æ¨¡å¼
class UserController {
    constructor(userService, authService) {
        this.userService = userService;
        this.authService = authService;
    }
    
    registerUser(userData) {
        if (this.authService.canRegister(userData)) {
            return this.userService.createUser(userData);
        }
        return false;
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-organization')">è¤‡è£½</button>
            </div>
            
            <h3>18.5 è¨­è¨ˆæ¨¡å¼</h3>
            <p>è¨­è¨ˆæ¨¡å¼æ˜¯è§£æ±ºå¸¸è¦‹è»Ÿä»¶è¨­è¨ˆå•é¡Œçš„å¯é‡ç”¨è§£æ±ºæ–¹æ¡ˆã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-design-patterns" readonly>// 1. å–®ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰
class Database {
    constructor() {
        if (Database.instance) {
            return Database.instance;
        }
        
        Database.instance = this;
        this.connections = 0;
        console.log('Database initialized');
    }
    
    connect() {
        this.connections++;
        console.log(`New connection established. Total: ${this.connections}`);
    }
}

const db1 = new Database();
const db2 = new Database(); // è¿”å›ç›¸åŒå¯¦ä¾‹
console.log(db1 === db2); // true

// 2. å·¥å» æ¨¡å¼ï¼ˆFactoryï¼‰
class UserFactory {
    createUser(type, userData) {
        switch (type) {
            case 'admin':
                return new AdminUser(userData);
            case 'regular':
                return new RegularUser(userData);
            case 'guest':
                return new GuestUser(userData);
            default:
                throw new Error(`User type ${type} not supported.`);
        }
    }
}

// 3. è§€å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰
class EventEmitter {
    constructor() {
        this.events = {};
    }
    
    on(event, listener) {
        if (!this.events[event]) {
            this.events[event] = [];
        }
        this.events[event].push(listener);
    }
    
    emit(event, ...args) {
        if (this.events[event]) {
            this.events[event].forEach(listener => listener(...args));
        }
    }
    
    off(event, listener) {
        if (this.events[event]) {
            this.events[event] = this.events[event]
                .filter(l => l !== listener);
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const emitter = new EventEmitter();
emitter.on('userCreated', user => console.log('User created:', user));
emitter.emit('userCreated', { name: 'å°æ˜' });

// 4. æ¨¡å¡Šæ¨¡å¼ï¼ˆModuleï¼‰
// è¦‹ä¸Šä¸€å€‹ä»£ç¢¼ç¤ºä¾‹

// 5. ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰
class ValidationStrategy {
    validate(value) {
        throw new Error('validate() must be implemented');
    }
}

class RequiredFieldStrategy extends ValidationStrategy {
    validate(value) {
        return value !== null && value !== undefined && value !== '';
    }
}

class EmailStrategy extends ValidationStrategy {
    validate(value) {
        return /\S+@\S+\.\S+/.test(value);
    }
}

class Validator {
    constructor(strategy) {
        this.strategy = strategy;
    }
    
    validate(value) {
        return this.strategy.validate(value);
    }
}</textarea>
                <button class="copy-button" onclick="copyCode('code-design-patterns')">è¤‡è£½</button>
            </div>
            
            <h3>18.6 å¯ç¶­è­·æ€§èˆ‡å¯æ¸¬è©¦æ€§</h3>
            <p>ç·¨å¯«å¯ç¶­è­·å’Œå¯æ¸¬è©¦çš„ä»£ç¢¼å¯ä»¥æ¸›å°‘é•·æœŸç¶­è­·æˆæœ¬ã€‚</p>
            
            <div class="runnable-code">
                <textarea class="code-editor" id="code-maintainability" readonly>// 1. ç·¨å¯«å°å‹ã€å¯æ¸¬è©¦çš„å‡½æ•¸
// é›£ä»¥æ¸¬è©¦çš„å‡½æ•¸
function validateAndProcessOrder(order) {
    // é©—è­‰
    if (!order.items || order.items.length === 0) {
        alert('è¨‚å–®ä¸­æ²’æœ‰å•†å“ï¼');
        return false;
    }
    
    // è¨ˆç®—ç¸½åƒ¹
    let total = 0;
    for (const item of order.items) {
        total += item.price * item.quantity;
    }
    
    // æ‡‰ç”¨æŠ˜æ‰£
    if (total > 1000) {
        total *= 0.9;
    }
    
    // ç™¼é€åˆ°ä¼ºæœå™¨
    fetch('/api/orders', {
        method: 'POST',
        body: JSON.stringify({ ...order, total })
    });
    
    // æ›´æ–°UI
    document.getElementById('orderStatus').textContent = 'è¨‚å–®å·²æäº¤';
}

// å¯æ¸¬è©¦çš„ç‰ˆæœ¬
function validateOrder(order) {
    return order.items && order.items.length > 0;
}

function calculateOrderTotal(items) {
    return items.reduce((total, item) => total + item.price * item.quantity, 0);
}

function applyDiscount(total) {
    return total > 1000 ? total * 0.9 : total;
}

function submitOrder(order, total) {
    return fetch('/api/orders', {
        method: 'POST',
        body: JSON.stringify({ ...order, total })
    });
}

function updateOrderUI(status) {
    document.getElementById('orderStatus').textContent = status;
}

// å”èª¿å‡½æ•¸
async function processOrder(order) {
    if (!validateOrder(order)) {
        alert('è¨‚å–®ä¸­æ²’æœ‰å•†å“ï¼');
        return false;
    }
    
    const subtotal = calculateOrderTotal(order.items);
    const total = applyDiscount(subtotal);
    
    try {
        await submitOrder(order, total);
        updateOrderUI('è¨‚å–®å·²æäº¤');
        return true;
    } catch (error) {
        updateOrderUI('è¨‚å–®æäº¤å¤±æ•—');
        console.error(error);
        return false;
    }
}

// 2. ä¾è³´æ³¨å…¥ï¼Œä½¿æ¸¬è©¦æ›´å®¹æ˜“
class OrderProcessor {
    constructor(orderService, discountService, notificationService) {
        this.orderService = orderService;
        this.discountService = discountService;
        this.notificationService = notificationService;
    }
    
    async processOrder(order) {
        const validOrder = this.orderService.validateOrder(order);
        if (!validOrder) return false;
        
        const discountedOrder = this.discountService.applyDiscount(order);
        const result = await this.orderService.submitOrder(discountedOrder);
        
        if (result.success) {
            this.notificationService.notify(order.user, 'è¨‚å–®è™•ç†æˆåŠŸ');
        }
        
        return result.success;
    }
}

// 3. ä½¿ç”¨ç´”å‡½æ•¸æé«˜å¯æ¸¬è©¦æ€§
// ç´”å‡½æ•¸ï¼šç›¸åŒè¼¸å…¥å§‹çµ‚ç”¢ç”Ÿç›¸åŒè¼¸å‡ºï¼Œç„¡å‰¯ä½œç”¨
function calculateTax(amount, taxRate) {
    return amount * taxRate;
}

// æ¸¬è©¦ç´”å‡½æ•¸å¾ˆç°¡å–®
function testCalculateTax() {
    console.assert(calculateTax(100, 0.1) === 10, 'ç¨…æ¬¾è¨ˆç®—éŒ¯èª¤');
}</textarea>
                <button class="copy-button" onclick="copyCode('code-maintainability')">è¤‡è£½</button>
            </div>
        </section>
        
        <script>
            // ä¸»é¡Œåˆ‡æ›åŠŸèƒ½
            const themeToggleBtn = document.getElementById('theme-toggle');
            const htmlElement = document.documentElement;
            
            themeToggleBtn.addEventListener('click', () => {
                if (htmlElement.getAttribute('data-theme') === 'light') {
                    htmlElement.setAttribute('data-theme', 'dark');
                    localStorage.setItem('theme', 'dark');
                } else {
                    htmlElement.setAttribute('data-theme', 'light');
                    localStorage.setItem('theme', 'light');
                }
            });
            
            // è¼‰å…¥å·²ä¿å­˜çš„ä¸»é¡Œè¨­ç½®
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                htmlElement.setAttribute('data-theme', savedTheme);
            }
            
            // è¤‡è£½ä»£ç¢¼åŠŸèƒ½
            function copyCode(elementId) {
                const codeElement = document.getElementById(elementId);
                codeElement.select();
                document.execCommand('copy');
                
                const button = codeElement.nextElementSibling;
                const originalText = button.textContent;
                button.textContent = 'å·²è¤‡è£½!';
                
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }
        </script>
    </main>
    <footer>
        <p>Â© 2023 JavaScript å®Œæ•´æ•™å­¸ | ç‰ˆæ¬Šæ‰€æœ‰</p>
    </footer>
</body>
</html>

